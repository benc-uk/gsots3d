var Dt=Object.create;var Pe=Object.defineProperty;var Ot=Object.getOwnPropertyDescriptor;var zt=Object.getOwnPropertyNames;var Gt=Object.getPrototypeOf,Vt=Object.prototype.hasOwnProperty;var kt=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),$t=(e,r)=>{for(var t in r)Pe(e,t,{get:r[t],enumerable:!0})},Ht=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of zt(r))!Vt.call(e,n)&&n!==t&&Pe(e,n,{get:()=>r[n],enumerable:!(o=Ot(r,n))||o.enumerable});return e};var ee=(e,r,t)=>(t=e!=null?Dt(Gt(e)):{},Ht(r||!e||!e.__esModule?Pe(t,"default",{value:e,enumerable:!0}):t,e));var J=kt((At,Fe)=>{"use strict";(function(e,r){"use strict";typeof define=="function"&&define.amd?define(r):typeof Fe=="object"&&Fe.exports?Fe.exports=r():e.log=r()})(At,function(){"use strict";var e=function(){},r="undefined",t=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function n(h,m){var u=h[m];if(typeof u.bind=="function")return u.bind(h);try{return Function.prototype.bind.call(u,h)}catch{return function(){return Function.prototype.apply.apply(u,[h,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(h){return h==="debug"&&(h="log"),typeof console===r?!1:h==="trace"&&t?c:console[h]!==void 0?n(console,h):console.log!==void 0?n(console,"log"):e}function i(h,m){for(var u=0;u<o.length;u++){var E=o[u];this[E]=u<h?e:this.methodFactory(E,h,m)}this.log=this.debug}function f(h,m,u){return function(){typeof console!==r&&(i.call(this,m,u),this[h].apply(this,arguments))}}function s(h,m,u){return a(h)||f.apply(this,arguments)}function l(h,m,u){var E=this,v;m=m??"WARN";var T="loglevel";typeof h=="string"?T+=":"+h:typeof h=="symbol"&&(T=void 0);function A(F){var M=(o[F]||"silent").toUpperCase();if(!(typeof window===r||!T)){try{window.localStorage[T]=M;return}catch{}try{window.document.cookie=encodeURIComponent(T)+"="+M+";"}catch{}}}function b(){var F;if(!(typeof window===r||!T)){try{F=window.localStorage[T]}catch{}if(typeof F===r)try{var M=window.document.cookie,g=M.indexOf(encodeURIComponent(T)+"=");g!==-1&&(F=/^([^;]+)/.exec(M.slice(g))[1])}catch{}return E.levels[F]===void 0&&(F=void 0),F}}function _(){if(!(typeof window===r||!T)){try{window.localStorage.removeItem(T);return}catch{}try{window.document.cookie=encodeURIComponent(T)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}E.name=h,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=u||s,E.getLevel=function(){return v},E.setLevel=function(F,M){if(typeof F=="string"&&E.levels[F.toUpperCase()]!==void 0&&(F=E.levels[F.toUpperCase()]),typeof F=="number"&&F>=0&&F<=E.levels.SILENT){if(v=F,M!==!1&&A(F),i.call(E,F,h),typeof console===r&&F<E.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+F},E.setDefaultLevel=function(F){m=F,b()||E.setLevel(F,!1)},E.resetLevel=function(){E.setLevel(m,!1),_()},E.enableAll=function(F){E.setLevel(E.levels.TRACE,F)},E.disableAll=function(F){E.setLevel(E.levels.SILENT,F)};var I=b();I==null&&(I=m),E.setLevel(I,!1)}var x=new l,y={};x.getLogger=function(m){if(typeof m!="symbol"&&typeof m!="string"||m==="")throw new TypeError("You must supply a name when creating a logger.");var u=y[m];return u||(u=y[m]=new l(m,x.getLevel(),x.methodFactory)),u};var p=typeof window!==r?window.log:void 0;return x.noConflict=function(){return typeof window!==r&&window.log===x&&(window.log=p),x},x.getLoggers=function(){return y},x.default=x,x})});var de=Float32Array;function Be(e,r,t){let o=new de(3);return e&&(o[0]=e),r&&(o[1]=r),t&&(o[2]=t),o}function Xt(e,r,t){return t=t||new de(3),t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Yt(e,r,t){return t=t||new de(3),t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}var xr=Float32Array;function Wt(e){return e=e||new xr(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jt(e,r){r=r||new xr(16);let t=e[0*4+0],o=e[0*4+1],n=e[0*4+2],c=e[0*4+3],a=e[1*4+0],i=e[1*4+1],f=e[1*4+2],s=e[1*4+3],l=e[2*4+0],x=e[2*4+1],y=e[2*4+2],p=e[2*4+3],h=e[3*4+0],m=e[3*4+1],u=e[3*4+2],E=e[3*4+3],v=y*E,T=u*p,A=f*E,b=u*s,_=f*p,I=y*s,F=n*E,M=u*c,g=n*p,P=y*c,d=n*s,B=f*c,w=l*m,L=h*x,G=a*m,V=h*i,H=a*x,X=l*i,ce=t*m,ae=h*o,ie=t*x,se=l*o,fe=t*i,le=a*o,tr=v*i+b*x+_*m-(T*i+A*x+I*m),nr=T*o+F*x+P*m-(v*o+M*x+g*m),or=A*o+M*i+d*m-(b*o+F*i+B*m),cr=I*o+g*i+B*x-(_*o+P*i+d*x),D=1/(t*tr+a*nr+l*or+h*cr);return r[0]=D*tr,r[1]=D*nr,r[2]=D*or,r[3]=D*cr,r[4]=D*(T*a+A*l+I*h-(v*a+b*l+_*h)),r[5]=D*(v*t+M*l+g*h-(T*t+F*l+P*h)),r[6]=D*(b*t+F*a+B*h-(A*t+M*a+d*h)),r[7]=D*(_*t+P*a+d*l-(I*t+g*a+B*l)),r[8]=D*(w*s+V*p+H*E-(L*s+G*p+X*E)),r[9]=D*(L*c+ce*p+se*E-(w*c+ae*p+ie*E)),r[10]=D*(G*c+ae*s+fe*E-(V*c+ce*s+le*E)),r[11]=D*(X*c+ie*s+le*p-(H*c+se*s+fe*p)),r[12]=D*(G*y+X*u+L*f-(H*u+w*f+V*y)),r[13]=D*(ie*u+w*n+ae*y-(ce*y+se*u+L*n)),r[14]=D*(ce*f+le*u+V*n-(fe*u+G*n+ae*f)),r[15]=D*(fe*y+H*n+se*f-(ie*f+le*y+X*n)),r}function Kt(e,r,t){t=t||Be();let o=r[0],n=r[1],c=r[2],a=o*e[0*4+3]+n*e[1*4+3]+c*e[2*4+3]+e[3*4+3];return t[0]=(o*e[0*4+0]+n*e[1*4+0]+c*e[2*4+0]+e[3*4+0])/a,t[1]=(o*e[0*4+1]+n*e[1*4+1]+c*e[2*4+1]+e[3*4+1])/a,t[2]=(o*e[0*4+2]+n*e[1*4+2]+c*e[2*4+2]+e[3*4+2])/a,t}function qt(e,r,t){t=t||Be();let o=r[0],n=r[1],c=r[2];return t[0]=o*e[0*4+0]+n*e[1*4+0]+c*e[2*4+0],t[1]=o*e[0*4+1]+n*e[1*4+1]+c*e[2*4+1],t[2]=o*e[0*4+2]+n*e[1*4+2]+c*e[2*4+2],t}var Ce=5120,re=5121,Ne=5122,Ue=5123,Le=5124,De=5125,Oe=5126,Zt=32819,Qt=32820,Jt=33635,en=5131,rn=33640,tn=35899,nn=35902,on=36269,cn=34042,yr={};{let e=yr;e[Ce]=Int8Array,e[re]=Uint8Array,e[Ne]=Int16Array,e[Ue]=Uint16Array,e[Le]=Int32Array,e[De]=Uint32Array,e[Oe]=Float32Array,e[Zt]=Uint16Array,e[Qt]=Uint16Array,e[Jt]=Uint16Array,e[en]=Uint16Array,e[rn]=Uint32Array,e[tn]=Uint32Array,e[nn]=Uint32Array,e[on]=Uint32Array,e[cn]=Uint32Array}function ze(e){if(e instanceof Int8Array)return Ce;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return re;if(e instanceof Int16Array)return Ne;if(e instanceof Uint16Array)return Ue;if(e instanceof Int32Array)return Le;if(e instanceof Uint32Array)return De;if(e instanceof Float32Array)return Oe;throw new Error("unsupported typed array type")}function pr(e){if(e===Int8Array)return Ce;if(e===Uint8Array||e===Uint8ClampedArray)return re;if(e===Int16Array)return Ne;if(e===Uint16Array)return Ue;if(e===Int32Array)return Le;if(e===Uint32Array)return De;if(e===Float32Array)return Oe;throw new Error("unsupported typed array type")}function an(e){let r=yr[e];if(!r)throw new Error("unknown gl type");return r}var ue=typeof SharedArrayBuffer<"u"?function(r){return r&&r.buffer&&(r.buffer instanceof ArrayBuffer||r.buffer instanceof SharedArrayBuffer)}:function(r){return r&&r.buffer&&r.buffer instanceof ArrayBuffer};function sn(...e){console.error(...e)}var ar=new Map;function hr(e,r){if(!e||typeof e!="object")return!1;let t=ar.get(r);t||(t=new WeakMap,ar.set(r,t));let o=t.get(e);if(o===void 0){let n=Object.prototype.toString.call(e);o=n.substring(8,n.length-1)===r,t.set(e,o)}return o}function fn(e,r){return typeof WebGLBuffer<"u"&&hr(r,"WebGLBuffer")}function Er(e,r){return typeof WebGLTexture<"u"&&hr(r,"WebGLTexture")}var br=35044,W=34962,Tr=34963,ln=34660,un=5120,mn=5121,xn=5122,yn=5123,pn=5124,hn=5125,Ar=5126,_r={attribPrefix:""};function En(e,r,t,o,n){e.bindBuffer(r,t),e.bufferData(r,o,n||br)}function Ge(e,r,t,o){if(fn(e,r))return r;t=t||W;let n=e.createBuffer();return En(e,t,n,r,o),n}function vr(e){return e==="indices"}function bn(e){return e===Int8Array||e===Uint8Array}function Fr(e){return e.length?e:e.data}var Tn=/coord|texture/i,An=/color|colour/i;function _n(e,r){let t;if(Tn.test(e)?t=2:An.test(e)?t=4:t=3,r%t>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${t} but ${r} values is not evenly divisible by ${t}. You should specify it.`);return t}function Mr(e,r,t){return e.numComponents||e.size||_n(r,t||Fr(e).length)}function xe(e,r){if(ue(e))return e;if(ue(e.data))return e.data;Array.isArray(e)&&(e={data:e});let t=e.type?Ve(e.type):void 0;return t||(vr(r)?t=Uint16Array:t=Float32Array),new t(e.data)}function vn(e){return typeof e=="number"?e:e?pr(e):Ar}function Ve(e){return typeof e=="number"?an(e):e||Float32Array}function Fn(e,r){return{buffer:r.buffer,numValues:2*3*4,type:vn(r.type),arrayType:Ve(r.type)}}function Mn(e,r){let t=r.data||r,o=Ve(r.type),n=t*o.BYTES_PER_ELEMENT,c=e.createBuffer();return e.bindBuffer(W,c),e.bufferData(W,n,r.drawType||br),{buffer:c,numValues:t,type:pr(o),arrayType:o}}function Sn(e,r,t){let o=xe(r,t);return{arrayType:o.constructor,buffer:Ge(e,o,void 0,r.drawType),type:ze(o),numValues:0}}function In(e,r){let t={};return Object.keys(r).forEach(function(o){if(!vr(o)){let n=r[o],c=n.attrib||n.name||n.attribName||_r.attribPrefix+o;if(n.value){if(!Array.isArray(n.value)&&!ue(n.value))throw new Error("array.value is not array or typedarray");t[c]={value:n.value}}else{let a;n.buffer&&n.buffer instanceof WebGLBuffer?a=Fn:typeof n=="number"||typeof n.data=="number"?a=Mn:a=Sn;let{buffer:i,type:f,numValues:s,arrayType:l}=a(e,n,o),x=n.normalize!==void 0?n.normalize:bn(l),y=Mr(n,o,s);t[c]={buffer:i,numComponents:y,type:f,normalize:x,stride:n.stride||0,offset:n.offset||0,divisor:n.divisor===void 0?void 0:n.divisor,drawType:n.drawType}}}}),e.bindBuffer(W,null),t}function gn(e,r){return r===un||r===mn?1:r===xn||r===yn?2:r===pn||r===hn||r===Ar?4:0}var Q=["position","positions","a_position"];function wn(e){let r,t;for(t=0;t<Q.length&&(r=Q[t],!(r in e));++t);t===Q.length&&(r=Object.keys(e)[0]);let o=e[r],n=Fr(o).length;if(n===void 0)return 1;let c=Mr(o,r),a=n/c;if(n%c>0)throw new Error(`numComponents ${c} not correct for length ${n}`);return a}function Pn(e,r){let t,o;for(o=0;o<Q.length&&(t=Q[o],!(t in r||(t=_r.attribPrefix+t,t in r)));++o);o===Q.length&&(t=Object.keys(r)[0]);let n=r[t];if(!n.buffer)return 1;e.bindBuffer(W,n.buffer);let c=e.getBufferParameter(W,ln);e.bindBuffer(W,null);let a=gn(e,n.type),i=c/a,f=n.numComponents||n.size,s=i/f;if(s%1!==0)throw new Error(`numComponents ${f} not correct for length ${length}`);return s}function ke(e,r,t){let o=In(e,r),n=Object.assign({},t||{});n.attribs=Object.assign({},t?t.attribs:{},o);let c=r.indices;if(c){let a=xe(c,"indices");n.indices=Ge(e,a,Tr),n.numElements=a.length,n.elementType=ze(a)}else n.numElements||(n.numElements=Pn(e,n.attribs));return n}function Rn(e,r,t){let o=t==="indices"?Tr:W,n=xe(r,t);return Ge(e,n,o)}function dn(e,r){let t={};return Object.keys(r).forEach(function(o){t[o]=Rn(e,r[o],o)}),r.indices?(t.numElements=r.indices.length,t.elementType=ze(xe(r.indices))):t.numElements=wn(r),t}function Bn(e,r){let t=0;return e.push=function(){for(let o=0;o<arguments.length;++o){let n=arguments[o];if(n instanceof Array||ue(n))for(let c=0;c<n.length;++c)e[t++]=n[c];else e[t++]=n}},e.reset=function(o){t=o||0},e.numComponents=r,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function R(e,r,t){let o=t||Float32Array;return Bn(new o(e*r),e)}function $e(e,r,t){let o=e.length,n=new Float32Array(3);for(let c=0;c<o;c+=3)t(r,[e[c],e[c+1],e[c+2]],n),e[c]=n[0],e[c+1]=n[1],e[c+2]=n[2]}function Cn(e,r,t){t=t||Be();let o=r[0],n=r[1],c=r[2];return t[0]=o*e[0*4+0]+n*e[0*4+1]+c*e[0*4+2],t[1]=o*e[1*4+0]+n*e[1*4+1]+c*e[1*4+2],t[2]=o*e[2*4+0]+n*e[2*4+1]+c*e[2*4+2],t}function Nn(e,r){return $e(e,r,qt),e}function Un(e,r){return $e(e,jt(r),Cn),e}function Ln(e,r){return $e(e,r,Kt),e}function Dn(e,r){return Object.keys(e).forEach(function(t){let o=e[t];t.indexOf("pos")>=0?Ln(o,r):t.indexOf("tan")>=0||t.indexOf("binorm")>=0?Nn(o,r):t.indexOf("norm")>=0&&Un(o,r)}),e}function Sr(e,r,t){return e=e||2,r=r||0,t=t||0,e*=.5,{position:{numComponents:2,data:[r+-1*e,t+-1*e,r+1*e,t+-1*e,r+-1*e,t+1*e,r+1*e,t+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function Ir(e,r,t,o,n){e=e||1,r=r||1,t=t||1,o=o||1,n=n||Wt();let c=(t+1)*(o+1),a=R(3,c),i=R(3,c),f=R(2,c);for(let y=0;y<=o;y++)for(let p=0;p<=t;p++){let h=p/t,m=y/o;a.push(e*h-e*.5,0,r*m-r*.5),i.push(0,1,0),f.push(h,m)}let s=t+1,l=R(3,t*o*2,Uint16Array);for(let y=0;y<o;y++)for(let p=0;p<t;p++)l.push((y+0)*s+p,(y+1)*s+p,(y+0)*s+p+1),l.push((y+1)*s+p,(y+1)*s+p+1,(y+0)*s+p+1);return Dn({position:a,normal:i,texcoord:f,indices:l},n)}function gr(e,r,t,o,n,c,a){if(r<=0||t<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");o=o||0,n=n||Math.PI,c=c||0,a=a||Math.PI*2;let i=n-o,f=a-c,s=(r+1)*(t+1),l=R(3,s),x=R(3,s),y=R(2,s);for(let m=0;m<=t;m++)for(let u=0;u<=r;u++){let E=u/r,v=m/t,T=f*E+c,A=i*v+o,b=Math.sin(T),_=Math.cos(T),I=Math.sin(A),F=Math.cos(A),M=_*I,g=F,P=b*I;l.push(e*M,e*g,e*P),x.push(M,g,P),y.push(1-E,v)}let p=r+1,h=R(3,r*t*2,Uint16Array);for(let m=0;m<r;m++)for(let u=0;u<t;u++)h.push((u+0)*p+m,(u+0)*p+m+1,(u+1)*p+m),h.push((u+1)*p+m,(u+0)*p+m+1,(u+1)*p+m+1);return{position:l,normal:x,texcoord:y,indices:h}}var On=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function wr(e){e=e||1;let r=e/2,t=[[-r,-r,-r],[+r,-r,-r],[-r,+r,-r],[+r,+r,-r],[-r,-r,+r],[+r,-r,+r],[-r,+r,+r],[+r,+r,+r]],o=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],n=[[1,0],[0,0],[0,1],[1,1]],c=6*4,a=R(3,c),i=R(3,c),f=R(2,c),s=R(3,6*2,Uint16Array);for(let l=0;l<6;++l){let x=On[l];for(let p=0;p<4;++p){let h=t[x[p]],m=o[l],u=n[p];a.push(h),i.push(m),f.push(u)}let y=4*l;s.push(y+0,y+1,y+2),s.push(y+0,y+2,y+3)}return{position:a,normal:i,texcoord:f,indices:s}}function He(e,r,t,o,n,c,a){if(o<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<1)throw new Error("verticalSubdivisions must be 1 or greater");let i=c===void 0?!0:c,f=a===void 0?!0:a,s=(i?2:0)+(f?2:0),l=(o+1)*(n+1+s),x=R(3,l),y=R(3,l),p=R(2,l),h=R(3,o*(n+s/2)*2,Uint16Array),m=o+1,u=Math.atan2(e-r,t),E=Math.cos(u),v=Math.sin(u),T=i?-2:0,A=n+(f?2:0);for(let b=T;b<=A;++b){let _=b/n,I=t*_,F;b<0?(I=0,_=1,F=e):b>n?(I=t,_=1,F=r):F=e+(r-e)*(b/n),(b===-2||b===n+2)&&(F=0,_=0),I-=t/2;for(let M=0;M<m;++M){let g=Math.sin(M*Math.PI*2/o),P=Math.cos(M*Math.PI*2/o);x.push(g*F,I,P*F),b<0?y.push(0,-1,0):b>n?y.push(0,1,0):F===0?y.push(0,0,0):y.push(g*E,v,P*E),p.push(M/o,1-_)}}for(let b=0;b<n+s;++b)if(!(b===1&&i||b===n+s-2&&f))for(let _=0;_<o;++_)h.push(m*(b+0)+0+_,m*(b+0)+1+_,m*(b+1)+1+_),h.push(m*(b+0)+0+_,m*(b+1)+1+_,m*(b+1)+0+_);return{position:x,normal:y,texcoord:p,indices:h}}function ir(e,r){r=r||[];let t=[];for(let o=0;o<e.length;o+=4){let n=e[o],c=e.slice(o+1,o+4);c.push.apply(c,r);for(let a=0;a<n;++a)t.push.apply(t,c)}return t}function Pr(){let e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],r=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],t=ir([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),o=ir([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,c={position:R(3,n),texcoord:R(2,n),normal:R(3,n),color:R(4,n,Uint8Array),indices:R(3,n/3,Uint16Array)};c.position.push(e),c.texcoord.push(r),c.normal.push(t),c.color.push(o);for(let a=0;a<n;++a)c.indices.push(a);return c}function Rr(e,r,t,o,n,c,a){if(n<=0)throw new Error("subdivisionDown must be > 0");c=c||0,a=a||1;let i=2,f=a-c,s=(n+1)*2*(2+i),l=R(3,s),x=R(3,s),y=R(2,s);function p(v,T,A){return v+(T-v)*A}function h(v,T,A,b,_,I){for(let F=0;F<=n;F++){let M=T/(i-1),g=F/n,P=(M-.5)*2,d=(c+g*f)*Math.PI,B=Math.sin(d),w=Math.cos(d),L=p(e,v,B),G=P*o,V=w*e,H=B*L;l.push(G,V,H);let X=Xt(Yt([0,B,w],A),b);x.push(X),y.push(M*_+I,g)}}for(let v=0;v<i;v++){let T=(v/(i-1)-.5)*2;h(r,v,[1,1,1],[0,0,0],1,0),h(r,v,[0,0,0],[T,0,0],0,0),h(t,v,[1,1,1],[0,0,0],1,0),h(t,v,[0,0,0],[T,0,0],0,1)}let m=R(3,n*2*(2+i),Uint16Array);function u(v,T){for(let A=0;A<n;++A)m.push(v+A+0,v+A+1,T+A+0),m.push(v+A+1,T+A+1,T+A+0)}let E=n+1;return u(E*0,E*4),u(E*5,E*7),u(E*6,E*2),u(E*3,E*1),{position:l,normal:x,texcoord:y,indices:m}}function dr(e,r,t,o,n,c){return He(e,e,r,t,o,n,c)}function Br(e,r,t,o,n,c){if(t<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<3)throw new Error("verticalSubdivisions must be 3 or greater");n=n||0,c=c||Math.PI*2;let a=c-n,i=t+1,f=o+1,s=i*f,l=R(3,s),x=R(3,s),y=R(2,s),p=R(3,t*o*2,Uint16Array);for(let h=0;h<f;++h){let m=h/o,u=m*Math.PI*2,E=Math.sin(u),v=e+E*r,T=Math.cos(u),A=T*r;for(let b=0;b<i;++b){let _=b/t,I=n+_*a,F=Math.sin(I),M=Math.cos(I),g=F*v,P=M*v,d=F*E,B=M*E;l.push(g,A,P),x.push(d,T,B),y.push(_,1-m)}}for(let h=0;h<o;++h)for(let m=0;m<t;++m){let u=1+m,E=1+h;p.push(i*h+m,i*E+m,i*h+u),p.push(i*E+m,i*E+u,i*h+u)}return{position:l,normal:x,texcoord:y,indices:p}}function Cr(e,r,t,o,n){if(r<3)throw new Error("divisions must be at least 3");t=t||1,n=n||1,o=o||0;let c=(r+1)*(t+1),a=R(3,c),i=R(3,c),f=R(2,c),s=R(3,t*r*2,Uint16Array),l=0,x=e-o,y=r+1;for(let p=0;p<=t;++p){let h=o+x*Math.pow(p/t,n);for(let m=0;m<=r;++m){let u=2*Math.PI*m/r,E=h*Math.cos(u),v=h*Math.sin(u);if(a.push(E,0,v),i.push(0,1,0),f.push(1-m/r,p/t),p>0&&m!==r){let T=l+(m+1),A=l+m,b=l+m-y,_=l+(m+1)-y;s.push(T,A,b),s.push(T,b,_)}}l+=r+1}return{position:a,normal:i,texcoord:f,indices:s}}function k(e){return function(r){let t=e.apply(this,Array.prototype.slice.call(arguments,1));return dn(r,t)}}function $(e){return function(r){let t=e.apply(null,Array.prototype.slice.call(arguments,1));return ke(r,t)}}var Ma=$(Pr),Sa=k(Pr),Ia=$(wr),ga=k(wr),wa=$(Ir),Pa=k(Ir),Ra=$(gr),da=k(gr),Ba=$(He),Ca=k(He),Na=$(Sr),Ua=k(Sr),La=$(Rr),Da=k(Rr),Oa=$(dr),za=k(dr),Ga=$(Br),Va=k(Br),ka=$(Cr),$a=k(Cr);function Xe(e){return!!e.texStorage2D}var zn=function(){let e={},r={};function t(o){let n=o.constructor.name;if(!e[n]){for(let c in o)if(typeof o[c]=="number"){let a=r[o[c]];r[o[c]]=a?`${a} | ${c}`:c}e[n]=!0}}return function(n,c){return t(n),r[c]||(typeof c=="number"?`0x${c.toString(16)}`:c)}}();var Ha={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0};var Xa=function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),Gn=6406,sr=6407,fr=6408,Vn=6409,kn=6410,$n=6402,Hn=34041;var Xn=33319,Yn=33320,Wn=6403,jn=36244,Kn=36248,qn=36249,Zn={};{let e=Zn;e[Gn]={numColorComponents:1},e[Vn]={numColorComponents:1},e[kn]={numColorComponents:2},e[sr]={numColorComponents:3},e[fr]={numColorComponents:4},e[Wn]={numColorComponents:1},e[jn]={numColorComponents:1},e[Xn]={numColorComponents:2},e[Yn]={numColorComponents:2},e[sr]={numColorComponents:3},e[Kn]={numColorComponents:3},e[fr]={numColorComponents:4},e[qn]={numColorComponents:4},e[$n]={numColorComponents:1},e[Hn]={numColorComponents:2}}var Ye=sn;function Nr(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var me=33984;var ye=34962,Qn=34963;var Jn=35713,eo=35714,ro=35632,to=35633,no=35981,Ur=35718,oo=35721,co=35971,ao=35382,io=35396,so=35398,fo=35392,lo=35395,pe=5126,Lr=35664,Dr=35665,Or=35666,We=5124,zr=35667,Gr=35668,Vr=35669,kr=35670,$r=35671,Hr=35672,Xr=35673,Yr=35674,Wr=35675,jr=35676,uo=35678,mo=35680,xo=35679,yo=35682,po=35685,ho=35686,Eo=35687,bo=35688,To=35689,Ao=35690,_o=36289,vo=36292,Fo=36293,je=5125,Kr=36294,qr=36295,Zr=36296,Mo=36298,So=36299,Io=36300,go=36303,wo=36306,Po=36307,Ro=36308,Bo=36311,he=3553,Ee=34067,Ke=32879,be=35866,S={};function Qr(e,r){return S[r].bindPoint}function Co(e,r){return function(t){e.uniform1f(r,t)}}function No(e,r){return function(t){e.uniform1fv(r,t)}}function Uo(e,r){return function(t){e.uniform2fv(r,t)}}function Lo(e,r){return function(t){e.uniform3fv(r,t)}}function Do(e,r){return function(t){e.uniform4fv(r,t)}}function Jr(e,r){return function(t){e.uniform1i(r,t)}}function et(e,r){return function(t){e.uniform1iv(r,t)}}function rt(e,r){return function(t){e.uniform2iv(r,t)}}function tt(e,r){return function(t){e.uniform3iv(r,t)}}function nt(e,r){return function(t){e.uniform4iv(r,t)}}function Oo(e,r){return function(t){e.uniform1ui(r,t)}}function zo(e,r){return function(t){e.uniform1uiv(r,t)}}function Go(e,r){return function(t){e.uniform2uiv(r,t)}}function Vo(e,r){return function(t){e.uniform3uiv(r,t)}}function ko(e,r){return function(t){e.uniform4uiv(r,t)}}function $o(e,r){return function(t){e.uniformMatrix2fv(r,!1,t)}}function Ho(e,r){return function(t){e.uniformMatrix3fv(r,!1,t)}}function Xo(e,r){return function(t){e.uniformMatrix4fv(r,!1,t)}}function Yo(e,r){return function(t){e.uniformMatrix2x3fv(r,!1,t)}}function Wo(e,r){return function(t){e.uniformMatrix3x2fv(r,!1,t)}}function jo(e,r){return function(t){e.uniformMatrix2x4fv(r,!1,t)}}function Ko(e,r){return function(t){e.uniformMatrix4x2fv(r,!1,t)}}function qo(e,r){return function(t){e.uniformMatrix3x4fv(r,!1,t)}}function Zo(e,r){return function(t){e.uniformMatrix4x3fv(r,!1,t)}}function O(e,r,t,o){let n=Qr(e,r);return Xe(e)?function(c){let a,i;!c||Er(e,c)?(a=c,i=null):(a=c.texture,i=c.sampler),e.uniform1i(o,t),e.activeTexture(me+t),e.bindTexture(n,a),e.bindSampler(t,i)}:function(c){e.uniform1i(o,t),e.activeTexture(me+t),e.bindTexture(n,c)}}function z(e,r,t,o,n){let c=Qr(e,r),a=new Int32Array(n);for(let i=0;i<n;++i)a[i]=t+i;return Xe(e)?function(i){e.uniform1iv(o,a),i.forEach(function(f,s){e.activeTexture(me+a[s]);let l,x;!f||Er(e,f)?(l=f,x=null):(l=f.texture,x=f.sampler),e.bindSampler(t,x),e.bindTexture(c,l)})}:function(i){e.uniform1iv(o,a),i.forEach(function(f,s){e.activeTexture(me+a[s]),e.bindTexture(c,f)})}}S[pe]={Type:Float32Array,size:4,setter:Co,arraySetter:No};S[Lr]={Type:Float32Array,size:8,setter:Uo,cols:2};S[Dr]={Type:Float32Array,size:12,setter:Lo,cols:3};S[Or]={Type:Float32Array,size:16,setter:Do,cols:4};S[We]={Type:Int32Array,size:4,setter:Jr,arraySetter:et};S[zr]={Type:Int32Array,size:8,setter:rt,cols:2};S[Gr]={Type:Int32Array,size:12,setter:tt,cols:3};S[Vr]={Type:Int32Array,size:16,setter:nt,cols:4};S[je]={Type:Uint32Array,size:4,setter:Oo,arraySetter:zo};S[Kr]={Type:Uint32Array,size:8,setter:Go,cols:2};S[qr]={Type:Uint32Array,size:12,setter:Vo,cols:3};S[Zr]={Type:Uint32Array,size:16,setter:ko,cols:4};S[kr]={Type:Uint32Array,size:4,setter:Jr,arraySetter:et};S[$r]={Type:Uint32Array,size:8,setter:rt,cols:2};S[Hr]={Type:Uint32Array,size:12,setter:tt,cols:3};S[Xr]={Type:Uint32Array,size:16,setter:nt,cols:4};S[Yr]={Type:Float32Array,size:32,setter:$o,rows:2,cols:2};S[Wr]={Type:Float32Array,size:48,setter:Ho,rows:3,cols:3};S[jr]={Type:Float32Array,size:64,setter:Xo,rows:4,cols:4};S[po]={Type:Float32Array,size:32,setter:Yo,rows:2,cols:3};S[ho]={Type:Float32Array,size:32,setter:jo,rows:2,cols:4};S[Eo]={Type:Float32Array,size:48,setter:Wo,rows:3,cols:2};S[bo]={Type:Float32Array,size:48,setter:qo,rows:3,cols:4};S[To]={Type:Float32Array,size:64,setter:Ko,rows:4,cols:2};S[Ao]={Type:Float32Array,size:64,setter:Zo,rows:4,cols:3};S[uo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:he};S[mo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ee};S[xo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ke};S[yo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:he};S[_o]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:be};S[vo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:be};S[Fo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ee};S[Mo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:he};S[So]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ke};S[Io]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ee};S[go]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:be};S[wo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:he};S[Po]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ke};S[Ro]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ee};S[Bo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:be};function Te(e,r){return function(t){if(t.value)switch(e.disableVertexAttribArray(r),t.value.length){case 4:e.vertexAttrib4fv(r,t.value);break;case 3:e.vertexAttrib3fv(r,t.value);break;case 2:e.vertexAttrib2fv(r,t.value);break;case 1:e.vertexAttrib1fv(r,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(ye,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t.numComponents||t.size,t.type||pe,t.normalize||!1,t.stride||0,t.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(r,t.divisor||0)}}function j(e,r){return function(t){if(t.value)if(e.disableVertexAttribArray(r),t.value.length===4)e.vertexAttrib4iv(r,t.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(ye,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||We,t.stride||0,t.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(r,t.divisor||0)}}function Ae(e,r){return function(t){if(t.value)if(e.disableVertexAttribArray(r),t.value.length===4)e.vertexAttrib4uiv(r,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(ye,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||je,t.stride||0,t.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(r,t.divisor||0)}}function qe(e,r,t){let o=t.size,n=t.count;return function(c){e.bindBuffer(ye,c.buffer);let a=c.size||c.numComponents||o,i=a/n,f=c.type||pe,l=S[f].size*a,x=c.normalize||!1,y=c.offset||0,p=l/n;for(let h=0;h<n;++h)e.enableVertexAttribArray(r+h),e.vertexAttribPointer(r+h,i,f,x,l,y+p*h),e.vertexAttribDivisor&&e.vertexAttribDivisor(r+h,c.divisor||0)}}var U={};U[pe]={size:4,setter:Te};U[Lr]={size:8,setter:Te};U[Dr]={size:12,setter:Te};U[Or]={size:16,setter:Te};U[We]={size:4,setter:j};U[zr]={size:8,setter:j};U[Gr]={size:12,setter:j};U[Vr]={size:16,setter:j};U[je]={size:4,setter:Ae};U[Kr]={size:8,setter:Ae};U[qr]={size:12,setter:Ae};U[Zr]={size:16,setter:Ae};U[kr]={size:4,setter:j};U[$r]={size:8,setter:j};U[Hr]={size:12,setter:j};U[Xr]={size:16,setter:j};U[Yr]={size:4,setter:qe,count:2};U[Wr]={size:9,setter:qe,count:3};U[jr]={size:16,setter:qe,count:4};var Qo=/ERROR:\s*\d+:(\d+)/gi;function Jo(e,r="",t=0){let o=[...r.matchAll(Qo)],n=new Map(o.map((c,a)=>{let i=parseInt(c[1]),f=o[a+1],s=f?f.index:r.length,l=r.substring(c.index,s);return[i-1,l]}));return e.split(`
`).map((c,a)=>{let i=n.get(a);return`${a+1+t}: ${c}${i?`

^^^ ${i}`:""}`}).join(`
`)}var lr=/^[ \t]*\n/;function ot(e){let r=0;return lr.test(e)&&(r=1,e=e.replace(lr,"")),{lineOffset:r,shaderSource:e}}function ec(e,r){return e.errorCallback(r),e.callback&&setTimeout(()=>{e.callback(`${r}
${e.errors.join(`
`)}`)}),null}function rc(e,r,t,o){if(o=o||Ye,!e.getShaderParameter(t,Jn)){let c=e.getShaderInfoLog(t),{lineOffset:a,shaderSource:i}=ot(e.getShaderSource(t)),f=`${Jo(i,c,a)}
Error compiling ${zn(e,r)}: ${c}`;return o(f),f}return""}function te(e,r,t){let o,n,c;if(typeof r=="function"&&(t=r,r=void 0),typeof e=="function")t=e,e=void 0;else if(e&&!Array.isArray(e)){let s=e;t=s.errorCallback,e=s.attribLocations,o=s.transformFeedbackVaryings,n=s.transformFeedbackMode,c=s.callback}let a=t||Ye,i=[],f={errorCallback(s,...l){i.push(s),a(s,...l)},transformFeedbackVaryings:o,transformFeedbackMode:n,callback:c,errors:i};{let s={};Array.isArray(e)?e.forEach(function(l,x){s[l]=r?r[x]:x}):s=e||{},f.attribLocations=s}return f}var tc=["VERTEX_SHADER","FRAGMENT_SHADER"];function nc(e,r){if(r.indexOf("frag")>=0)return ro;if(r.indexOf("vert")>=0)return to}function oc(e,r,t){let o=e.getAttachedShaders(r);for(let n of o)t.has(n)&&e.deleteShader(n);e.deleteProgram(r)}var cc=(e=0)=>new Promise(r=>setTimeout(r,e));function ct(e,r,t){let o=e.createProgram(),{attribLocations:n,transformFeedbackVaryings:c,transformFeedbackMode:a}=te(t);for(let i=0;i<r.length;++i){let f=r[i];if(typeof f=="string"){let s=Nr(f),l=s?s.text:f,x=e[tc[i]];s&&s.type&&(x=nc(e,s.type)||x),f=e.createShader(x),e.shaderSource(f,ot(l).shaderSource),e.compileShader(f),e.attachShader(o,f)}}Object.entries(n).forEach(([i,f])=>e.bindAttribLocation(o,f,i));{let i=c;i&&(i.attribs&&(i=i.attribs),Array.isArray(i)||(i=Object.keys(i)),e.transformFeedbackVaryings(o,i,a||no))}return e.linkProgram(o),o}function at(e,r,t,o,n){let c=te(t,o,n),a=new Set(r),i=ct(e,r,c);function f(s,l){let x=st(s,l,c.errorCallback);return x&&oc(s,l,a),x}if(c.callback){it(e,i).then(()=>{let s=f(e,i);c.callback(s,s?void 0:i)});return}return f(e,i)?void 0:i}function _e(e){return function(r,t,...o){return new Promise((n,c)=>{let a=te(...o);a.callback=(i,f)=>{i?c(i):n(f)},e(r,t,a)})}}var Ya=_e(at),Wa=_e(Ze);async function it(e,r){let t=e.getExtension("KHR_parallel_shader_compile"),o=t?(c,a)=>c.getProgramParameter(a,t.COMPLETION_STATUS_KHR):()=>!0,n=0;do await cc(n),n=1e3/60;while(!o(e,r))}async function ac(e,r){for(let t of Object.values(r))await it(e,t)}function st(e,r,t){if(t=t||Ye,!e.getProgramParameter(r,eo)){let n=e.getProgramInfoLog(r);t(`Error in program linking: ${n}`);let a=e.getAttachedShaders(r).map(i=>rc(e,e.getShaderParameter(i,e.SHADER_TYPE),i,t));return`${n}
${a.filter(i=>i).join(`
`)}`}}function ic(e,r,t,o,n){return at(e,r,t,o,n)}function ft(e){let r=e.name;return r.startsWith("gl_")||r.startsWith("webgl_")}var sc=/(\.|\[|]|\w+)/g,fc=e=>e>="0"&&e<="9";function lc(e,r,t,o){let n=e.split(sc).filter(i=>i!==""),c=0,a="";for(;;){let i=n[c++];a+=i;let f=fc(i[0]),s=f?parseInt(i):i;if(f&&(a+=n[c++]),c===n.length){t[s]=r;break}else{let x=n[c++],y=x==="[",p=t[s]||(y?[]:{});t[s]=p,t=p,o[a]=o[a]||function(h){return function(m){lt(h,m)}}(p),a+=x}}}function uc(e,r){let t=0;function o(i,f,s){let l=f.name.endsWith("[0]"),x=f.type,y=S[x];if(!y)throw new Error(`unknown type: 0x${x.toString(16)}`);let p;if(y.bindPoint){let h=t;t+=f.size,l?p=y.arraySetter(e,x,h,s,f.size):p=y.setter(e,x,h,s,f.size)}else y.arraySetter&&l?p=y.arraySetter(e,s):p=y.setter(e,s);return p.location=s,p}let n={},c={},a=e.getProgramParameter(r,Ur);for(let i=0;i<a;++i){let f=e.getActiveUniform(r,i);if(ft(f))continue;let s=f.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));let l=e.getUniformLocation(r,f.name);if(l){let x=o(r,f,l);n[s]=x,lc(s,x,c,n)}}return n}function mc(e,r){let t={},o=e.getProgramParameter(r,co);for(let n=0;n<o;++n){let c=e.getTransformFeedbackVarying(r,n);t[c.name]={index:n,type:c.type,size:c.size}}return t}function xc(e,r){let t=e.getProgramParameter(r,Ur),o=[],n=[];for(let i=0;i<t;++i){n.push(i),o.push({});let f=e.getActiveUniform(r,i);o[i].name=f.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(i){let f=i[0],s=i[1];e.getActiveUniforms(r,n,e[f]).forEach(function(l,x){o[x][s]=l})});let c={},a=e.getProgramParameter(r,ao);for(let i=0;i<a;++i){let f=e.getActiveUniformBlockName(r,i),s={index:e.getUniformBlockIndex(r,f),usedByVertexShader:e.getActiveUniformBlockParameter(r,i,io),usedByFragmentShader:e.getActiveUniformBlockParameter(r,i,so),size:e.getActiveUniformBlockParameter(r,i,fo),uniformIndices:e.getActiveUniformBlockParameter(r,i,lo)};s.used=s.usedByVertexShader||s.usedByFragmentShader,c[f]=s}return{blockSpecs:c,uniformData:o}}function lt(e,r){for(let t in r){let o=e[t];typeof o=="function"?o(r[t]):lt(e[t],r[t])}}function K(e,...r){let t=e.uniformSetters||e,o=r.length;for(let n=0;n<o;++n){let c=r[n];if(Array.isArray(c)){let a=c.length;for(let i=0;i<a;++i)K(t,c[i])}else for(let a in c){let i=t[a];i&&i(c[a])}}}function yc(e,r){let t={},o=e.getProgramParameter(r,oo);for(let n=0;n<o;++n){let c=e.getActiveAttrib(r,n);if(ft(c))continue;let a=e.getAttribLocation(r,c.name),i=U[c.type],f=i.setter(e,a,i);f.location=a,t[c.name]=f}return t}function pc(e,r){for(let t in r){let o=e[t];o&&o(r[t])}}function ut(e,r,t){t.vertexArrayObject?e.bindVertexArray(t.vertexArrayObject):(pc(r.attribSetters||r,t.attribs),t.indices&&e.bindBuffer(Qn,t.indices))}function Re(e,r){let t=uc(e,r),o=yc(e,r),n={program:r,uniformSetters:t,attribSetters:o};return Xe(e)&&(n.uniformBlockSpec=xc(e,r),n.transformFeedbackInfo=mc(e,r)),n}var hc=/\s|{|}|;/;function Ze(e,r,t,o,n){let c=te(t,o,n),a=[];if(r=r.map(function(s){if(!hc.test(s)){let l=Nr(s);if(l)s=l.text;else{let x=`no element with id: ${s}`;c.errorCallback(x),a.push(x)}}return s}),a.length)return ec(c,"");let i=c.callback;i&&(c.callback=(s,l)=>{i(s,s?void 0:Re(e,l))});let f=ic(e,r,c);return f?Re(e,f):null}function ur(e,r,t,o,n){for(let[c,a]of Object.entries(r)){let i={...n},f=t[c];Array.isArray(f)||Object.assign(i,f);let s=st(e,a,i.errorCallback);if(s){for(let l of Object.values(r)){let x=e.getAttachedShaders(l);e.deleteProgram(l);for(let y of x)o.has(y)||e.deleteShader(y)}return s}}}function mt(e,r,t={}){let o=new Set,n=Object.fromEntries(Object.entries(r).map(([a,i])=>{let f={...t},s=Array.isArray(i)?i:i.shaders;return Array.isArray(i)||Object.assign(f,i),s.forEach(o.add,o),[a,ct(e,s,f)]}));if(t.callback){ac(e,n).then(()=>{let a=ur(e,n,r,o,t);t.callback(a,a?void 0:n)});return}return ur(e,n,r,o,t)?void 0:n}function Ec(e,r,t){t=te(t);function o(a,i){return Object.fromEntries(Object.entries(i).map(([f,s])=>[f,Re(a,s)]))}let n=t.callback;n&&(t.callback=(a,i)=>{n(a,a?void 0:o(e,i))});let c=mt(e,r,t);if(!(n||!c))return o(e,c)}var ja=_e(mt),Ka=_e(Ec);var bc=4,mr=5123;function xt(e,r,t,o,n,c){t=t===void 0?bc:t;let a=r.indices,i=r.elementType,f=o===void 0?r.numElements:o;n=n===void 0?0:n,i||a?c!==void 0?e.drawElementsInstanced(t,f,i===void 0?mr:r.elementType,n,c):e.drawElements(t,f,i===void 0?mr:r.elementType,n):c!==void 0?e.drawArraysInstanced(t,n,f,c):e.drawArrays(t,n,f)}var Tc=6402;var Ac=33190,_c=36012,vc=35056,Fc=36013,Mc=32854,Sc=32855,Ic=36194,yt=33189,pt=6401,ht=36168,Et=34041;var ve=36096,bt=36128,Qe=33306;var Y={};Y[Et]=Qe;Y[pt]=bt;Y[ht]=bt;Y[Tc]=ve;Y[yt]=ve;Y[Ac]=ve;Y[_c]=ve;Y[vc]=Qe;Y[Fc]=Qe;var q={};q[Mc]=!0;q[Sc]=!0;q[Ic]=!0;q[Et]=!0;q[yt]=!0;q[pt]=!0;q[ht]=!0;function Tt(e,r){r=r||1,r=Math.max(0,r);let t=e.clientWidth*r|0,o=e.clientHeight*r|0;return e.width!==t||e.height!==o?(e.width=t,e.height=o,!0):!1}var gc="u_mat",ne=class{constructor(r){this.diffuse=r.kd,this.specular=r.ks,this.shininess=r.ns,this.ambient=r.ka,this.emissive=r.ke}apply(r){let t={};for(let[o,n]of Object.entries(this))n!==void 0&&(t[`${gc}${o[0].toUpperCase()}${o.slice(1)}`]=n);K(r,t)}};var _t=ee(J(),1);function ei(e){_t.setLevel(e)}var Ie=ee(J(),1);var Je=ee(J(),1),oe=null;function Me(e=!0,r="canvas"){return oe||(Je.default.info("\u{1F58C}\uFE0F Creating WebGL2 context"),oe=document.querySelector(r).getContext("webgl2",{antialias:e}),oe||Je.default.error("\u{1F4A5} Unable to create WebGL2 context!"),oe)}var N=1e-6,Z=typeof Float32Array<"u"?Float32Array:Array;var ni=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});var C={};$t(C,{add:()=>ma,adjoint:()=>Lc,clone:()=>Rc,copy:()=>dc,create:()=>Pc,determinant:()=>Dc,equals:()=>ha,exactEquals:()=>pa,frob:()=>ua,fromQuat:()=>ra,fromQuat2:()=>qc,fromRotation:()=>Yc,fromRotationTranslation:()=>Mt,fromRotationTranslationScale:()=>Jc,fromRotationTranslationScaleOrigin:()=>ea,fromScaling:()=>Xc,fromTranslation:()=>Hc,fromValues:()=>Bc,fromXRotation:()=>Wc,fromYRotation:()=>jc,fromZRotation:()=>Kc,frustum:()=>ta,getRotation:()=>Qc,getScaling:()=>St,getTranslation:()=>Zc,identity:()=>vt,invert:()=>Uc,lookAt:()=>sa,mul:()=>Ea,multiply:()=>Ft,multiplyScalar:()=>xa,multiplyScalarAndAdd:()=>ya,ortho:()=>aa,orthoNO:()=>gt,orthoZO:()=>ia,perspective:()=>na,perspectiveFromFieldOfView:()=>ca,perspectiveNO:()=>It,perspectiveZO:()=>oa,rotate:()=>Gc,rotateX:()=>Vc,rotateY:()=>kc,rotateZ:()=>$c,scale:()=>zc,set:()=>Cc,str:()=>la,sub:()=>ba,subtract:()=>wt,targetTo:()=>fa,translate:()=>Oc,transpose:()=>Nc});function Pc(){var e=new Z(16);return Z!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Rc(e){var r=new Z(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function dc(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Bc(e,r,t,o,n,c,a,i,f,s,l,x,y,p,h,m){var u=new Z(16);return u[0]=e,u[1]=r,u[2]=t,u[3]=o,u[4]=n,u[5]=c,u[6]=a,u[7]=i,u[8]=f,u[9]=s,u[10]=l,u[11]=x,u[12]=y,u[13]=p,u[14]=h,u[15]=m,u}function Cc(e,r,t,o,n,c,a,i,f,s,l,x,y,p,h,m,u){return e[0]=r,e[1]=t,e[2]=o,e[3]=n,e[4]=c,e[5]=a,e[6]=i,e[7]=f,e[8]=s,e[9]=l,e[10]=x,e[11]=y,e[12]=p,e[13]=h,e[14]=m,e[15]=u,e}function vt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Nc(e,r){if(e===r){var t=r[1],o=r[2],n=r[3],c=r[6],a=r[7],i=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=t,e[6]=r[9],e[7]=r[13],e[8]=o,e[9]=c,e[11]=r[14],e[12]=n,e[13]=a,e[14]=i}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}function Uc(e,r){var t=r[0],o=r[1],n=r[2],c=r[3],a=r[4],i=r[5],f=r[6],s=r[7],l=r[8],x=r[9],y=r[10],p=r[11],h=r[12],m=r[13],u=r[14],E=r[15],v=t*i-o*a,T=t*f-n*a,A=t*s-c*a,b=o*f-n*i,_=o*s-c*i,I=n*s-c*f,F=l*m-x*h,M=l*u-y*h,g=l*E-p*h,P=x*u-y*m,d=x*E-p*m,B=y*E-p*u,w=v*B-T*d+A*P+b*g-_*M+I*F;return w?(w=1/w,e[0]=(i*B-f*d+s*P)*w,e[1]=(n*d-o*B-c*P)*w,e[2]=(m*I-u*_+E*b)*w,e[3]=(y*_-x*I-p*b)*w,e[4]=(f*g-a*B-s*M)*w,e[5]=(t*B-n*g+c*M)*w,e[6]=(u*A-h*I-E*T)*w,e[7]=(l*I-y*A+p*T)*w,e[8]=(a*d-i*g+s*F)*w,e[9]=(o*g-t*d-c*F)*w,e[10]=(h*_-m*A+E*v)*w,e[11]=(x*A-l*_-p*v)*w,e[12]=(i*M-a*P-f*F)*w,e[13]=(t*P-o*M+n*F)*w,e[14]=(m*T-h*b-u*v)*w,e[15]=(l*b-x*T+y*v)*w,e):null}function Lc(e,r){var t=r[0],o=r[1],n=r[2],c=r[3],a=r[4],i=r[5],f=r[6],s=r[7],l=r[8],x=r[9],y=r[10],p=r[11],h=r[12],m=r[13],u=r[14],E=r[15];return e[0]=i*(y*E-p*u)-x*(f*E-s*u)+m*(f*p-s*y),e[1]=-(o*(y*E-p*u)-x*(n*E-c*u)+m*(n*p-c*y)),e[2]=o*(f*E-s*u)-i*(n*E-c*u)+m*(n*s-c*f),e[3]=-(o*(f*p-s*y)-i*(n*p-c*y)+x*(n*s-c*f)),e[4]=-(a*(y*E-p*u)-l*(f*E-s*u)+h*(f*p-s*y)),e[5]=t*(y*E-p*u)-l*(n*E-c*u)+h*(n*p-c*y),e[6]=-(t*(f*E-s*u)-a*(n*E-c*u)+h*(n*s-c*f)),e[7]=t*(f*p-s*y)-a*(n*p-c*y)+l*(n*s-c*f),e[8]=a*(x*E-p*m)-l*(i*E-s*m)+h*(i*p-s*x),e[9]=-(t*(x*E-p*m)-l*(o*E-c*m)+h*(o*p-c*x)),e[10]=t*(i*E-s*m)-a*(o*E-c*m)+h*(o*s-c*i),e[11]=-(t*(i*p-s*x)-a*(o*p-c*x)+l*(o*s-c*i)),e[12]=-(a*(x*u-y*m)-l*(i*u-f*m)+h*(i*y-f*x)),e[13]=t*(x*u-y*m)-l*(o*u-n*m)+h*(o*y-n*x),e[14]=-(t*(i*u-f*m)-a*(o*u-n*m)+h*(o*f-n*i)),e[15]=t*(i*y-f*x)-a*(o*y-n*x)+l*(o*f-n*i),e}function Dc(e){var r=e[0],t=e[1],o=e[2],n=e[3],c=e[4],a=e[5],i=e[6],f=e[7],s=e[8],l=e[9],x=e[10],y=e[11],p=e[12],h=e[13],m=e[14],u=e[15],E=r*a-t*c,v=r*i-o*c,T=r*f-n*c,A=t*i-o*a,b=t*f-n*a,_=o*f-n*i,I=s*h-l*p,F=s*m-x*p,M=s*u-y*p,g=l*m-x*h,P=l*u-y*h,d=x*u-y*m;return E*d-v*P+T*g+A*M-b*F+_*I}function Ft(e,r,t){var o=r[0],n=r[1],c=r[2],a=r[3],i=r[4],f=r[5],s=r[6],l=r[7],x=r[8],y=r[9],p=r[10],h=r[11],m=r[12],u=r[13],E=r[14],v=r[15],T=t[0],A=t[1],b=t[2],_=t[3];return e[0]=T*o+A*i+b*x+_*m,e[1]=T*n+A*f+b*y+_*u,e[2]=T*c+A*s+b*p+_*E,e[3]=T*a+A*l+b*h+_*v,T=t[4],A=t[5],b=t[6],_=t[7],e[4]=T*o+A*i+b*x+_*m,e[5]=T*n+A*f+b*y+_*u,e[6]=T*c+A*s+b*p+_*E,e[7]=T*a+A*l+b*h+_*v,T=t[8],A=t[9],b=t[10],_=t[11],e[8]=T*o+A*i+b*x+_*m,e[9]=T*n+A*f+b*y+_*u,e[10]=T*c+A*s+b*p+_*E,e[11]=T*a+A*l+b*h+_*v,T=t[12],A=t[13],b=t[14],_=t[15],e[12]=T*o+A*i+b*x+_*m,e[13]=T*n+A*f+b*y+_*u,e[14]=T*c+A*s+b*p+_*E,e[15]=T*a+A*l+b*h+_*v,e}function Oc(e,r,t){var o=t[0],n=t[1],c=t[2],a,i,f,s,l,x,y,p,h,m,u,E;return r===e?(e[12]=r[0]*o+r[4]*n+r[8]*c+r[12],e[13]=r[1]*o+r[5]*n+r[9]*c+r[13],e[14]=r[2]*o+r[6]*n+r[10]*c+r[14],e[15]=r[3]*o+r[7]*n+r[11]*c+r[15]):(a=r[0],i=r[1],f=r[2],s=r[3],l=r[4],x=r[5],y=r[6],p=r[7],h=r[8],m=r[9],u=r[10],E=r[11],e[0]=a,e[1]=i,e[2]=f,e[3]=s,e[4]=l,e[5]=x,e[6]=y,e[7]=p,e[8]=h,e[9]=m,e[10]=u,e[11]=E,e[12]=a*o+l*n+h*c+r[12],e[13]=i*o+x*n+m*c+r[13],e[14]=f*o+y*n+u*c+r[14],e[15]=s*o+p*n+E*c+r[15]),e}function zc(e,r,t){var o=t[0],n=t[1],c=t[2];return e[0]=r[0]*o,e[1]=r[1]*o,e[2]=r[2]*o,e[3]=r[3]*o,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=r[7]*n,e[8]=r[8]*c,e[9]=r[9]*c,e[10]=r[10]*c,e[11]=r[11]*c,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function Gc(e,r,t,o){var n=o[0],c=o[1],a=o[2],i=Math.hypot(n,c,a),f,s,l,x,y,p,h,m,u,E,v,T,A,b,_,I,F,M,g,P,d,B,w,L;return i<N?null:(i=1/i,n*=i,c*=i,a*=i,f=Math.sin(t),s=Math.cos(t),l=1-s,x=r[0],y=r[1],p=r[2],h=r[3],m=r[4],u=r[5],E=r[6],v=r[7],T=r[8],A=r[9],b=r[10],_=r[11],I=n*n*l+s,F=c*n*l+a*f,M=a*n*l-c*f,g=n*c*l-a*f,P=c*c*l+s,d=a*c*l+n*f,B=n*a*l+c*f,w=c*a*l-n*f,L=a*a*l+s,e[0]=x*I+m*F+T*M,e[1]=y*I+u*F+A*M,e[2]=p*I+E*F+b*M,e[3]=h*I+v*F+_*M,e[4]=x*g+m*P+T*d,e[5]=y*g+u*P+A*d,e[6]=p*g+E*P+b*d,e[7]=h*g+v*P+_*d,e[8]=x*B+m*w+T*L,e[9]=y*B+u*w+A*L,e[10]=p*B+E*w+b*L,e[11]=h*B+v*w+_*L,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}function Vc(e,r,t){var o=Math.sin(t),n=Math.cos(t),c=r[4],a=r[5],i=r[6],f=r[7],s=r[8],l=r[9],x=r[10],y=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=c*n+s*o,e[5]=a*n+l*o,e[6]=i*n+x*o,e[7]=f*n+y*o,e[8]=s*n-c*o,e[9]=l*n-a*o,e[10]=x*n-i*o,e[11]=y*n-f*o,e}function kc(e,r,t){var o=Math.sin(t),n=Math.cos(t),c=r[0],a=r[1],i=r[2],f=r[3],s=r[8],l=r[9],x=r[10],y=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=c*n-s*o,e[1]=a*n-l*o,e[2]=i*n-x*o,e[3]=f*n-y*o,e[8]=c*o+s*n,e[9]=a*o+l*n,e[10]=i*o+x*n,e[11]=f*o+y*n,e}function $c(e,r,t){var o=Math.sin(t),n=Math.cos(t),c=r[0],a=r[1],i=r[2],f=r[3],s=r[4],l=r[5],x=r[6],y=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=c*n+s*o,e[1]=a*n+l*o,e[2]=i*n+x*o,e[3]=f*n+y*o,e[4]=s*n-c*o,e[5]=l*n-a*o,e[6]=x*n-i*o,e[7]=y*n-f*o,e}function Hc(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Xc(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=r[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Yc(e,r,t){var o=t[0],n=t[1],c=t[2],a=Math.hypot(o,n,c),i,f,s;return a<N?null:(a=1/a,o*=a,n*=a,c*=a,i=Math.sin(r),f=Math.cos(r),s=1-f,e[0]=o*o*s+f,e[1]=n*o*s+c*i,e[2]=c*o*s-n*i,e[3]=0,e[4]=o*n*s-c*i,e[5]=n*n*s+f,e[6]=c*n*s+o*i,e[7]=0,e[8]=o*c*s+n*i,e[9]=n*c*s-o*i,e[10]=c*c*s+f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Wc(e,r){var t=Math.sin(r),o=Math.cos(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=t,e[7]=0,e[8]=0,e[9]=-t,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jc(e,r){var t=Math.sin(r),o=Math.cos(r);return e[0]=o,e[1]=0,e[2]=-t,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=t,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Kc(e,r){var t=Math.sin(r),o=Math.cos(r);return e[0]=o,e[1]=t,e[2]=0,e[3]=0,e[4]=-t,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Mt(e,r,t){var o=r[0],n=r[1],c=r[2],a=r[3],i=o+o,f=n+n,s=c+c,l=o*i,x=o*f,y=o*s,p=n*f,h=n*s,m=c*s,u=a*i,E=a*f,v=a*s;return e[0]=1-(p+m),e[1]=x+v,e[2]=y-E,e[3]=0,e[4]=x-v,e[5]=1-(l+m),e[6]=h+u,e[7]=0,e[8]=y+E,e[9]=h-u,e[10]=1-(l+p),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function qc(e,r){var t=new Z(3),o=-r[0],n=-r[1],c=-r[2],a=r[3],i=r[4],f=r[5],s=r[6],l=r[7],x=o*o+n*n+c*c+a*a;return x>0?(t[0]=(i*a+l*o+f*c-s*n)*2/x,t[1]=(f*a+l*n+s*o-i*c)*2/x,t[2]=(s*a+l*c+i*n-f*o)*2/x):(t[0]=(i*a+l*o+f*c-s*n)*2,t[1]=(f*a+l*n+s*o-i*c)*2,t[2]=(s*a+l*c+i*n-f*o)*2),Mt(e,r,t),e}function Zc(e,r){return e[0]=r[12],e[1]=r[13],e[2]=r[14],e}function St(e,r){var t=r[0],o=r[1],n=r[2],c=r[4],a=r[5],i=r[6],f=r[8],s=r[9],l=r[10];return e[0]=Math.hypot(t,o,n),e[1]=Math.hypot(c,a,i),e[2]=Math.hypot(f,s,l),e}function Qc(e,r){var t=new Z(3);St(t,r);var o=1/t[0],n=1/t[1],c=1/t[2],a=r[0]*o,i=r[1]*n,f=r[2]*c,s=r[4]*o,l=r[5]*n,x=r[6]*c,y=r[8]*o,p=r[9]*n,h=r[10]*c,m=a+l+h,u=0;return m>0?(u=Math.sqrt(m+1)*2,e[3]=.25*u,e[0]=(x-p)/u,e[1]=(y-f)/u,e[2]=(i-s)/u):a>l&&a>h?(u=Math.sqrt(1+a-l-h)*2,e[3]=(x-p)/u,e[0]=.25*u,e[1]=(i+s)/u,e[2]=(y+f)/u):l>h?(u=Math.sqrt(1+l-a-h)*2,e[3]=(y-f)/u,e[0]=(i+s)/u,e[1]=.25*u,e[2]=(x+p)/u):(u=Math.sqrt(1+h-a-l)*2,e[3]=(i-s)/u,e[0]=(y+f)/u,e[1]=(x+p)/u,e[2]=.25*u),e}function Jc(e,r,t,o){var n=r[0],c=r[1],a=r[2],i=r[3],f=n+n,s=c+c,l=a+a,x=n*f,y=n*s,p=n*l,h=c*s,m=c*l,u=a*l,E=i*f,v=i*s,T=i*l,A=o[0],b=o[1],_=o[2];return e[0]=(1-(h+u))*A,e[1]=(y+T)*A,e[2]=(p-v)*A,e[3]=0,e[4]=(y-T)*b,e[5]=(1-(x+u))*b,e[6]=(m+E)*b,e[7]=0,e[8]=(p+v)*_,e[9]=(m-E)*_,e[10]=(1-(x+h))*_,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ea(e,r,t,o,n){var c=r[0],a=r[1],i=r[2],f=r[3],s=c+c,l=a+a,x=i+i,y=c*s,p=c*l,h=c*x,m=a*l,u=a*x,E=i*x,v=f*s,T=f*l,A=f*x,b=o[0],_=o[1],I=o[2],F=n[0],M=n[1],g=n[2],P=(1-(m+E))*b,d=(p+A)*b,B=(h-T)*b,w=(p-A)*_,L=(1-(y+E))*_,G=(u+v)*_,V=(h+T)*I,H=(u-v)*I,X=(1-(y+m))*I;return e[0]=P,e[1]=d,e[2]=B,e[3]=0,e[4]=w,e[5]=L,e[6]=G,e[7]=0,e[8]=V,e[9]=H,e[10]=X,e[11]=0,e[12]=t[0]+F-(P*F+w*M+V*g),e[13]=t[1]+M-(d*F+L*M+H*g),e[14]=t[2]+g-(B*F+G*M+X*g),e[15]=1,e}function ra(e,r){var t=r[0],o=r[1],n=r[2],c=r[3],a=t+t,i=o+o,f=n+n,s=t*a,l=o*a,x=o*i,y=n*a,p=n*i,h=n*f,m=c*a,u=c*i,E=c*f;return e[0]=1-x-h,e[1]=l+E,e[2]=y-u,e[3]=0,e[4]=l-E,e[5]=1-s-h,e[6]=p+m,e[7]=0,e[8]=y+u,e[9]=p-m,e[10]=1-s-x,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ta(e,r,t,o,n,c,a){var i=1/(t-r),f=1/(n-o),s=1/(c-a);return e[0]=c*2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c*2*f,e[6]=0,e[7]=0,e[8]=(t+r)*i,e[9]=(n+o)*f,e[10]=(a+c)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*c*2*s,e[15]=0,e}function It(e,r,t,o,n){var c=1/Math.tan(r/2),a;return e[0]=c/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(a=1/(o-n),e[10]=(n+o)*a,e[14]=2*n*o*a):(e[10]=-1,e[14]=-2*o),e}var na=It;function oa(e,r,t,o,n){var c=1/Math.tan(r/2),a;return e[0]=c/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(a=1/(o-n),e[10]=n*a,e[14]=n*o*a):(e[10]=-1,e[14]=-o),e}function ca(e,r,t,o){var n=Math.tan(r.upDegrees*Math.PI/180),c=Math.tan(r.downDegrees*Math.PI/180),a=Math.tan(r.leftDegrees*Math.PI/180),i=Math.tan(r.rightDegrees*Math.PI/180),f=2/(a+i),s=2/(n+c);return e[0]=f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=-((a-i)*f*.5),e[9]=(n-c)*s*.5,e[10]=o/(t-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*t/(t-o),e[15]=0,e}function gt(e,r,t,o,n,c,a){var i=1/(r-t),f=1/(o-n),s=1/(c-a);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*s,e[11]=0,e[12]=(r+t)*i,e[13]=(n+o)*f,e[14]=(a+c)*s,e[15]=1,e}var aa=gt;function ia(e,r,t,o,n,c,a){var i=1/(r-t),f=1/(o-n),s=1/(c-a);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=s,e[11]=0,e[12]=(r+t)*i,e[13]=(n+o)*f,e[14]=c*s,e[15]=1,e}function sa(e,r,t,o){var n,c,a,i,f,s,l,x,y,p,h=r[0],m=r[1],u=r[2],E=o[0],v=o[1],T=o[2],A=t[0],b=t[1],_=t[2];return Math.abs(h-A)<N&&Math.abs(m-b)<N&&Math.abs(u-_)<N?vt(e):(l=h-A,x=m-b,y=u-_,p=1/Math.hypot(l,x,y),l*=p,x*=p,y*=p,n=v*y-T*x,c=T*l-E*y,a=E*x-v*l,p=Math.hypot(n,c,a),p?(p=1/p,n*=p,c*=p,a*=p):(n=0,c=0,a=0),i=x*a-y*c,f=y*n-l*a,s=l*c-x*n,p=Math.hypot(i,f,s),p?(p=1/p,i*=p,f*=p,s*=p):(i=0,f=0,s=0),e[0]=n,e[1]=i,e[2]=l,e[3]=0,e[4]=c,e[5]=f,e[6]=x,e[7]=0,e[8]=a,e[9]=s,e[10]=y,e[11]=0,e[12]=-(n*h+c*m+a*u),e[13]=-(i*h+f*m+s*u),e[14]=-(l*h+x*m+y*u),e[15]=1,e)}function fa(e,r,t,o){var n=r[0],c=r[1],a=r[2],i=o[0],f=o[1],s=o[2],l=n-t[0],x=c-t[1],y=a-t[2],p=l*l+x*x+y*y;p>0&&(p=1/Math.sqrt(p),l*=p,x*=p,y*=p);var h=f*y-s*x,m=s*l-i*y,u=i*x-f*l;return p=h*h+m*m+u*u,p>0&&(p=1/Math.sqrt(p),h*=p,m*=p,u*=p),e[0]=h,e[1]=m,e[2]=u,e[3]=0,e[4]=x*u-y*m,e[5]=y*h-l*u,e[6]=l*m-x*h,e[7]=0,e[8]=l,e[9]=x,e[10]=y,e[11]=0,e[12]=n,e[13]=c,e[14]=a,e[15]=1,e}function la(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function ua(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function ma(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e[4]=r[4]+t[4],e[5]=r[5]+t[5],e[6]=r[6]+t[6],e[7]=r[7]+t[7],e[8]=r[8]+t[8],e[9]=r[9]+t[9],e[10]=r[10]+t[10],e[11]=r[11]+t[11],e[12]=r[12]+t[12],e[13]=r[13]+t[13],e[14]=r[14]+t[14],e[15]=r[15]+t[15],e}function wt(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e[4]=r[4]-t[4],e[5]=r[5]-t[5],e[6]=r[6]-t[6],e[7]=r[7]-t[7],e[8]=r[8]-t[8],e[9]=r[9]-t[9],e[10]=r[10]-t[10],e[11]=r[11]-t[11],e[12]=r[12]-t[12],e[13]=r[13]-t[13],e[14]=r[14]-t[14],e[15]=r[15]-t[15],e}function xa(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e[4]=r[4]*t,e[5]=r[5]*t,e[6]=r[6]*t,e[7]=r[7]*t,e[8]=r[8]*t,e[9]=r[9]*t,e[10]=r[10]*t,e[11]=r[11]*t,e[12]=r[12]*t,e[13]=r[13]*t,e[14]=r[14]*t,e[15]=r[15]*t,e}function ya(e,r,t,o){return e[0]=r[0]+t[0]*o,e[1]=r[1]+t[1]*o,e[2]=r[2]+t[2]*o,e[3]=r[3]+t[3]*o,e[4]=r[4]+t[4]*o,e[5]=r[5]+t[5]*o,e[6]=r[6]+t[6]*o,e[7]=r[7]+t[7]*o,e[8]=r[8]+t[8]*o,e[9]=r[9]+t[9]*o,e[10]=r[10]+t[10]*o,e[11]=r[11]+t[11]*o,e[12]=r[12]+t[12]*o,e[13]=r[13]+t[13]*o,e[14]=r[14]+t[14]*o,e[15]=r[15]+t[15]*o,e}function pa(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[11]===r[11]&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[15]===r[15]}function ha(e,r){var t=e[0],o=e[1],n=e[2],c=e[3],a=e[4],i=e[5],f=e[6],s=e[7],l=e[8],x=e[9],y=e[10],p=e[11],h=e[12],m=e[13],u=e[14],E=e[15],v=r[0],T=r[1],A=r[2],b=r[3],_=r[4],I=r[5],F=r[6],M=r[7],g=r[8],P=r[9],d=r[10],B=r[11],w=r[12],L=r[13],G=r[14],V=r[15];return Math.abs(t-v)<=N*Math.max(1,Math.abs(t),Math.abs(v))&&Math.abs(o-T)<=N*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(n-A)<=N*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(c-b)<=N*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(a-_)<=N*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-I)<=N*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(f-F)<=N*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(s-M)<=N*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-g)<=N*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(x-P)<=N*Math.max(1,Math.abs(x),Math.abs(P))&&Math.abs(y-d)<=N*Math.max(1,Math.abs(y),Math.abs(d))&&Math.abs(p-B)<=N*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(h-w)<=N*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(m-L)<=N*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(u-G)<=N*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(E-V)<=N*Math.max(1,Math.abs(E),Math.abs(V))}var Ea=Ft,ba=wt;var Se=class{constructor(r,t){this.position=[0,0,0];this.scale=[1,1,1];this.rotate=[0,0,0];this.transparent=!1;this.position=t,this.model=r}rotateY(r){this.rotate[1]+=r}rotateX(r){this.rotate[0]+=r}rotateZ(r){this.rotate[2]+=r}render(r,t,o,n){if(!r)return;let c=C.create();this.position&&C.translate(c,c,this.position),this.rotate&&(C.rotateX(c,c,this.rotate[0]),C.rotateY(c,c,this.rotate[1]),C.rotateZ(c,c,this.rotate[2])),this.scale&&C.scale(c,c,this.scale),t.u_world=c,C.invert(t.u_worldInverseTranspose,c),C.transpose(t.u_worldInverseTranspose,t.u_worldInverseTranspose),C.multiply(t.u_worldViewProjection,o,c);for(let a of this.model.parts){let i=a.bufferInfo;this.model.materials[a.materialName].apply(n),ut(r,n,i),K(n,t),xt(r,i)}}};var Pt=`precision highp float;

varying vec3 v_lighting;
varying vec2 v_texCoord;

uniform vec3 u_matDiffuse;
uniform float u_transparency;

// temp
varying vec4 v_color;

void main(void) {
  gl_FragColor = vec4(u_matDiffuse, 1.0) * vec4(v_lighting, 1.0);
  //gl_FragColor.a = u_transparency;
  
  // return red pixels for testing
  //gl_FragColor = vec4(1.0, 0.0, 0.0, 0.5);
}
`;var Rt=`precision highp float;

uniform mat4 u_worldViewProjection;
uniform mat4 u_worldInverseTranspose;
uniform mat4 u_world;

uniform vec3 u_lightPosition;
uniform vec3 u_lightColor;
uniform vec3 u_lightAmbient;

attribute vec4 position;
attribute vec3 normal;
attribute vec4 color;

// varying to pass to fragment shader
varying vec3 v_lighting;
varying vec4 v_color;

void main() {
  vec4 worldPos = u_world * position;
  float distance = length(u_lightPosition - worldPos.xyz) * 0.06;
  vec3 lightVector = normalize(u_lightPosition - worldPos.xyz);
  vec4 normalWorld = u_worldInverseTranspose * vec4(normal, 1.0);
  float intensity = clamp(dot(normalWorld.xyz, lightVector), 0.0, 0.8);

  v_lighting = u_lightAmbient + (u_lightColor * (intensity / (distance * distance)));
  //v_lighting = u_lightAmbient + (u_lightColor * intensity);
  v_color = color;
  gl_Position = u_worldViewProjection * position;
}`;var dt=class e{constructor(r){this.aspectRatio=4/3;this.programs={};this.started=!1;this.instances=[];this.resizeable=!0;this.lights=[];this.gl=r,this.models=new we,this.prevTime=0,this.totalTime=0;let t=new ge;t.position=[10,120,-20],t.color=[1,1,1],t.ambient=[.2,.2,.2],this.lights.push(t)}static async init(r){let t=Me(!0,r);if(!t)throw Ie.default.error("\u{1F4A5} Failed to get WebGL context"),new Error("Failed to get WebGL context");let o=new e(t),n=t.canvas.clientWidth,c=t.canvas.clientHeight;o.aspectRatio=n/c;try{let a=Ze(t,[Rt,Pt]);o.programs.standard=a,Ie.default.info("\u{1F3A8} Loaded all shaders, GL is ready")}catch(a){throw Ie.default.error(a),a}return t.enable(t.DEPTH_TEST),t.enable(t.CULL_FACE),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),o.render=o.render.bind(o),o}async render(r){if(!this.gl)return;r*=.001;let t=r-this.prevTime;this.prevTime=r,this.totalTime+=t;let o={u_worldInverseTranspose:C.create(),u_worldViewProjection:C.create()};o.ewrwer=1.12;let n=this.programs.standard;this.lights[0].apply(n),this.resizeable&&(Tt(this.gl.canvas),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height));let c=C.targetTo(C.create(),[0,14,30],[0,0,0],[0,1,0]),a=C.invert(C.create(),c);o.u_viewInverse=c;let i=C.perspective(C.create(),50*Math.PI/180,this.aspectRatio,.1,1e3),f=C.multiply(C.create(),i,a);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.useProgram(n.program);for(let s of this.instances)s.render(this.gl,o,f,n);this.started&&requestAnimationFrame(this.render)}start(){this.started=!0,requestAnimationFrame(this.render)}stop(){this.started=!1}createInstance(r){let t=this.models.getModel(r);if(!t)throw new Error(`Model ${r} not found`);let o=new Se(t,[0,0,0]);return this.instances.push(o),o}get defaultLight(){return this.lights[0]}};var _a="u_light",ge=class{constructor(){this.position=[0,0,0];this.color=[1,1,1];this.ambient=[.1,.1,.1]}apply(r){let t=this.getUniforms();K(r,t)}getUniforms(){let r={};for(let[t,o]of Object.entries(this))o!==void 0&&(r[`${_a}${t[0].toUpperCase()}${t.slice(1)}`]=o);return r}};function Bt(e){let r=new Map,t={},o={newmtl(a,i){t={},r.set(i,t)},Ns(a){t.ns=parseFloat(a[0])},Ka(a){t.ka=a.map(parseFloat)},Kd(a){t.kd=a.map(parseFloat)},Ks(a){t.ks=a.map(parseFloat)},Ke(a){t.ke=a.map(parseFloat)},Ni(a){t.ni=parseFloat(a[0])},d(a){t.d=parseFloat(a[0])},illum(a){t.illum=parseInt(a[0])}},n=/(\w*)(?: )*(.*)/,c=e.split(`
`);for(let a=0;a<c.length;++a){let i=c[a].trim();if(i===""||i.startsWith("#"))continue;let f=n.exec(i);if(!f)continue;let[,s,l]=f,x=i.split(/\s+/).slice(1),y=o[s];if(!y){console.warn("unhandled keyword:",s);continue}y(x,l)}return r}var va=/(\w*)(?: )*(.*)/;function Ct(e){let r=e.split(`
`),t=[[0,0,0]],o=[[0,0]],n=[[0,0,0]],c=[t,o,n],a=[[],[],[]],i=Array(),f={},s="__default",l=Array(),x={v(m){t.push(m.map(parseFloat))},vn(m){n.push(m.map(parseFloat))},vt(m){o.push(m.map(parseFloat))},f(m){h();let u=m.length-2;for(let E=0;E<u;++E)y(m[0]),y(m[E+1]),y(m[E+2])},usemtl(m,u){s=u,p()},mtllib(m,u){l.push(u)},s(){},o(){}};function y(m){m.split("/").forEach((E,v)=>{if(!E)return;let T=parseInt(E),A=T+(T>=0?0:c[v].length);a[v].push(...c[v][A])})}function p(){f.material&&(f={})}function h(){if(!f.material){let m=[],u=[],E=[];a=[m,u,E],f={material:s,data:{position:m,texcoord:u,normal:E}},i.push(f)}}for(let m=0;m<r.length;++m){let u=r[m].trim();if(u===""||u.startsWith("#"))continue;let E=va.exec(u);if(!E)continue;let[,v,T]=E,A=u.split(/\s+/).slice(1),b=x[v];if(!b){console.warn("unhandled keyword:",v,"at line",m+1);continue}b(A,T)}for(let m of i)m.data.texcoord&&m.data.texcoord.length<=0&&delete m.data.texcoord;return{matLibNames:l,geometries:i}}async function er(e){let r=await fetch(e);if(!r.ok)throw new Error(`File fetch failed: ${r.statusText}`);return await r.text()}var Ut=ee(J(),1),Nt=class e{constructor(r){this.parts=[];this.materials={};this.name=r}static async parse(r=".",t){let o=t.split(".")[0],n=new e(o),c;try{c=await er(`${r}/${t}`)}catch{throw new Error(`\u{1F4A5} Unable to load model ${t}`)}let a=Ct(c);if(!a.geometries||a.geometries.length===0)throw new Error(`\u{1F4A5} Error parsing model ${t}`);if(a.matLibNames&&a.matLibNames.length>0)try{let s=await er(`${r}/${a.matLibNames[0]}`),l=Bt(s);for(let[x,y]of l)n.materials[x]=new ne(y)}catch{console.warn(`Unable to load material library ${a.matLibNames[0]}`)}let i=new ne({kd:[.2,.5,.97]});n.materials.__default=i;let f=Me();if(!f)throw new Error("Unable to get WebGL context");for(let s of a.geometries){let l=ke(f,s.data);n.parts.push(new rr(l,s.material))}return Ut.default.debug(`\u265F\uFE0F Model '${t}' loaded with ${n.parts.length} parts, ${Object.keys(n.materials).length} materials`),n}},rr=class{constructor(r,t){this.bufferInfo=r,this.materialName=t}};var Lt=ee(J(),1),we=class{constructor(){this.cache=new Map}getModel(r){if(!this.cache.has(r))throw new Error(`Model ${r} not found in cache`);return this.cache.get(r)}addModel(r){Lt.default.debug(`\u{1F9F0} Adding model '${r.name}' to cache`),this.cache.set(r.name,r)}};export{dt as Context,ge as Light,ne as Material,Nt as Model,we as ModelCache,ei as setLogLevel};
/*! Bundled license information:

twgl.js/dist/5.x/twgl-full.module.js:
  (* @license twgl.js 5.3.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
  Available via the MIT license.
  see: http://github.com/greggman/twgl.js for details *)
*/
