var zr=Object.create;var Pe=Object.defineProperty;var Gr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var kr=Object.getPrototypeOf,$r=Object.prototype.hasOwnProperty;var Xr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Yr=(e,t)=>{for(var r in t)Pe(e,r,{get:t[r],enumerable:!0})},Hr=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Vr(t))!$r.call(e,n)&&n!==r&&Pe(e,n,{get:()=>t[n],enumerable:!(o=Gr(t,n))||o.enumerable});return e};var te=(e,t,r)=>(r=e!=null?zr(kr(e)):{},Hr(t||!e||!e.__esModule?Pe(r,"default",{value:e,enumerable:!0}):r,e));var J=Xr((_r,Se)=>{"use strict";(function(e,t){"use strict";typeof define=="function"&&define.amd?define(t):typeof Se=="object"&&Se.exports?Se.exports=t():e.log=t()})(_r,function(){"use strict";var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function n(h,m){var u=h[m];if(typeof u.bind=="function")return u.bind(h);try{return Function.prototype.bind.call(u,h)}catch{return function(){return Function.prototype.apply.apply(u,[h,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function i(h){return h==="debug"&&(h="log"),typeof console===t?!1:h==="trace"&&r?c:console[h]!==void 0?n(console,h):console.log!==void 0?n(console,"log"):e}function a(h,m){for(var u=0;u<o.length;u++){var E=o[u];this[E]=u<h?e:this.methodFactory(E,h,m)}this.log=this.debug}function f(h,m,u){return function(){typeof console!==t&&(a.call(this,m,u),this[h].apply(this,arguments))}}function s(h,m,u){return i(h)||f.apply(this,arguments)}function l(h,m,u){var E=this,v;m=m??"WARN";var T="loglevel";typeof h=="string"?T+=":"+h:typeof h=="symbol"&&(T=void 0);function A(F){var S=(o[F]||"silent").toUpperCase();if(!(typeof window===t||!T)){try{window.localStorage[T]=S;return}catch{}try{window.document.cookie=encodeURIComponent(T)+"="+S+";"}catch{}}}function b(){var F;if(!(typeof window===t||!T)){try{F=window.localStorage[T]}catch{}if(typeof F===t)try{var S=window.document.cookie,w=S.indexOf(encodeURIComponent(T)+"=");w!==-1&&(F=/^([^;]+)/.exec(S.slice(w))[1])}catch{}return E.levels[F]===void 0&&(F=void 0),F}}function _(){if(!(typeof window===t||!T)){try{window.localStorage.removeItem(T);return}catch{}try{window.document.cookie=encodeURIComponent(T)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}E.name=h,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=u||s,E.getLevel=function(){return v},E.setLevel=function(F,S){if(typeof F=="string"&&E.levels[F.toUpperCase()]!==void 0&&(F=E.levels[F.toUpperCase()]),typeof F=="number"&&F>=0&&F<=E.levels.SILENT){if(v=F,S!==!1&&A(F),a.call(E,F,h),typeof console===t&&F<E.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+F},E.setDefaultLevel=function(F){m=F,b()||E.setLevel(F,!1)},E.resetLevel=function(){E.setLevel(m,!1),_()},E.enableAll=function(F){E.setLevel(E.levels.TRACE,F)},E.disableAll=function(F){E.setLevel(E.levels.SILENT,F)};var g=b();g==null&&(g=m),E.setLevel(g,!1)}var x=new l,p={};x.getLogger=function(m){if(typeof m!="symbol"&&typeof m!="string"||m==="")throw new TypeError("You must supply a name when creating a logger.");var u=p[m];return u||(u=p[m]=new l(m,x.getLevel(),x.methodFactory)),u};var y=typeof window!==t?window.log:void 0;return x.noConflict=function(){return typeof window!==t&&window.log===x&&(window.log=y),x},x.getLoggers=function(){return p},x.default=x,x})});var Be=Float32Array;function Ce(e,t,r){let o=new Be(3);return e&&(o[0]=e),t&&(o[1]=t),r&&(o[2]=r),o}function jr(e,t,r){return r=r||new Be(3),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function Wr(e,t,r){return r=r||new Be(3),r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}var yt=Float32Array;function Kr(e){return e=e||new yt(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Zr(e,t){t=t||new yt(16);let r=e[0*4+0],o=e[0*4+1],n=e[0*4+2],c=e[0*4+3],i=e[1*4+0],a=e[1*4+1],f=e[1*4+2],s=e[1*4+3],l=e[2*4+0],x=e[2*4+1],p=e[2*4+2],y=e[2*4+3],h=e[3*4+0],m=e[3*4+1],u=e[3*4+2],E=e[3*4+3],v=p*E,T=u*y,A=f*E,b=u*s,_=f*y,g=p*s,F=n*E,S=u*c,w=n*y,R=p*c,d=n*s,B=f*c,I=l*m,D=h*x,G=i*m,V=h*a,X=i*x,Y=l*a,ie=r*m,ae=h*o,se=r*x,fe=l*o,le=r*a,ue=i*o,ot=v*a+b*x+_*m-(T*a+A*x+g*m),ct=T*o+F*x+R*m-(v*o+S*x+w*m),it=A*o+S*a+d*m-(b*o+F*a+B*m),at=g*o+w*a+B*x-(_*o+R*a+d*x),L=1/(r*ot+i*ct+l*it+h*at);return t[0]=L*ot,t[1]=L*ct,t[2]=L*it,t[3]=L*at,t[4]=L*(T*i+A*l+g*h-(v*i+b*l+_*h)),t[5]=L*(v*r+S*l+w*h-(T*r+F*l+R*h)),t[6]=L*(b*r+F*i+B*h-(A*r+S*i+d*h)),t[7]=L*(_*r+R*i+d*l-(g*r+w*i+B*l)),t[8]=L*(I*s+V*y+X*E-(D*s+G*y+Y*E)),t[9]=L*(D*c+ie*y+fe*E-(I*c+ae*y+se*E)),t[10]=L*(G*c+ae*s+le*E-(V*c+ie*s+ue*E)),t[11]=L*(Y*c+se*s+ue*y-(X*c+fe*s+le*y)),t[12]=L*(G*p+Y*u+D*f-(X*u+I*f+V*p)),t[13]=L*(se*u+I*n+ae*p-(ie*p+fe*u+D*n)),t[14]=L*(ie*f+ue*u+V*n-(le*u+G*n+ae*f)),t[15]=L*(le*p+X*n+fe*f-(se*f+ue*p+Y*n)),t}function qr(e,t,r){r=r||Ce();let o=t[0],n=t[1],c=t[2],i=o*e[0*4+3]+n*e[1*4+3]+c*e[2*4+3]+e[3*4+3];return r[0]=(o*e[0*4+0]+n*e[1*4+0]+c*e[2*4+0]+e[3*4+0])/i,r[1]=(o*e[0*4+1]+n*e[1*4+1]+c*e[2*4+1]+e[3*4+1])/i,r[2]=(o*e[0*4+2]+n*e[1*4+2]+c*e[2*4+2]+e[3*4+2])/i,r}function Qr(e,t,r){r=r||Ce();let o=t[0],n=t[1],c=t[2];return r[0]=o*e[0*4+0]+n*e[1*4+0]+c*e[2*4+0],r[1]=o*e[0*4+1]+n*e[1*4+1]+c*e[2*4+1],r[2]=o*e[0*4+2]+n*e[1*4+2]+c*e[2*4+2],r}var Ne=5120,re=5121,Ue=5122,De=5123,Le=5124,Oe=5125,ze=5126,Jr=32819,en=32820,tn=33635,rn=5131,nn=33640,on=35899,cn=35902,an=36269,sn=34042,ht={};{let e=ht;e[Ne]=Int8Array,e[re]=Uint8Array,e[Ue]=Int16Array,e[De]=Uint16Array,e[Le]=Int32Array,e[Oe]=Uint32Array,e[ze]=Float32Array,e[Jr]=Uint16Array,e[en]=Uint16Array,e[tn]=Uint16Array,e[rn]=Uint16Array,e[nn]=Uint32Array,e[on]=Uint32Array,e[cn]=Uint32Array,e[an]=Uint32Array,e[sn]=Uint32Array}function Ge(e){if(e instanceof Int8Array)return Ne;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return re;if(e instanceof Int16Array)return Ue;if(e instanceof Uint16Array)return De;if(e instanceof Int32Array)return Le;if(e instanceof Uint32Array)return Oe;if(e instanceof Float32Array)return ze;throw new Error("unsupported typed array type")}function Et(e){if(e===Int8Array)return Ne;if(e===Uint8Array||e===Uint8ClampedArray)return re;if(e===Int16Array)return Ue;if(e===Uint16Array)return De;if(e===Int32Array)return Le;if(e===Uint32Array)return Oe;if(e===Float32Array)return ze;throw new Error("unsupported typed array type")}function fn(e){let t=ht[e];if(!t)throw new Error("unknown gl type");return t}var me=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function ln(...e){console.error(...e)}var st=new Map;function bt(e,t){if(!e||typeof e!="object")return!1;let r=st.get(t);r||(r=new WeakMap,st.set(t,r));let o=r.get(e);if(o===void 0){let n=Object.prototype.toString.call(e);o=n.substring(8,n.length-1)===t,r.set(e,o)}return o}function un(e,t){return typeof WebGLBuffer<"u"&&bt(t,"WebGLBuffer")}function Tt(e,t){return typeof WebGLTexture<"u"&&bt(t,"WebGLTexture")}var At=35044,j=34962,_t=34963,mn=34660,xn=5120,pn=5121,yn=5122,hn=5123,En=5124,bn=5125,vt=5126,Ft={attribPrefix:""};function Tn(e,t,r,o,n){e.bindBuffer(t,r),e.bufferData(t,o,n||At)}function Ve(e,t,r,o){if(un(e,t))return t;r=r||j;let n=e.createBuffer();return Tn(e,r,n,t,o),n}function St(e){return e==="indices"}function An(e){return e===Int8Array||e===Uint8Array}function Mt(e){return e.length?e:e.data}var _n=/coord|texture/i,vn=/color|colour/i;function Fn(e,t){let r;if(_n.test(e)?r=2:vn.test(e)?r=4:r=3,t%r>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function gt(e,t,r){return e.numComponents||e.size||Fn(t,r||Mt(e).length)}function pe(e,t){if(me(e))return e;if(me(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type?ke(e.type):void 0;return r||(St(t)?r=Uint16Array:r=Float32Array),new r(e.data)}function Sn(e){return typeof e=="number"?e:e?Et(e):vt}function ke(e){return typeof e=="number"?fn(e):e||Float32Array}function Mn(e,t){return{buffer:t.buffer,numValues:2*3*4,type:Sn(t.type),arrayType:ke(t.type)}}function gn(e,t){let r=t.data||t,o=ke(t.type),n=r*o.BYTES_PER_ELEMENT,c=e.createBuffer();return e.bindBuffer(j,c),e.bufferData(j,n,t.drawType||At),{buffer:c,numValues:r,type:Et(o),arrayType:o}}function wn(e,t,r){let o=pe(t,r);return{arrayType:o.constructor,buffer:Ve(e,o,void 0,t.drawType),type:Ge(o),numValues:0}}function In(e,t){let r={};return Object.keys(t).forEach(function(o){if(!St(o)){let n=t[o],c=n.attrib||n.name||n.attribName||Ft.attribPrefix+o;if(n.value){if(!Array.isArray(n.value)&&!me(n.value))throw new Error("array.value is not array or typedarray");r[c]={value:n.value}}else{let i;n.buffer&&n.buffer instanceof WebGLBuffer?i=Mn:typeof n=="number"||typeof n.data=="number"?i=gn:i=wn;let{buffer:a,type:f,numValues:s,arrayType:l}=i(e,n,o),x=n.normalize!==void 0?n.normalize:An(l),p=gt(n,o,s);r[c]={buffer:a,numComponents:p,type:f,normalize:x,stride:n.stride||0,offset:n.offset||0,divisor:n.divisor===void 0?void 0:n.divisor,drawType:n.drawType}}}}),e.bindBuffer(j,null),r}function Rn(e,t){return t===xn||t===pn?1:t===yn||t===hn?2:t===En||t===bn||t===vt?4:0}var Q=["position","positions","a_position"];function Pn(e){let t,r;for(r=0;r<Q.length&&(t=Q[r],!(t in e));++r);r===Q.length&&(t=Object.keys(e)[0]);let o=e[t],n=Mt(o).length;if(n===void 0)return 1;let c=gt(o,t),i=n/c;if(n%c>0)throw new Error(`numComponents ${c} not correct for length ${n}`);return i}function dn(e,t){let r,o;for(o=0;o<Q.length&&(r=Q[o],!(r in t||(r=Ft.attribPrefix+r,r in t)));++o);o===Q.length&&(r=Object.keys(t)[0]);let n=t[r];if(!n.buffer)return 1;e.bindBuffer(j,n.buffer);let c=e.getBufferParameter(j,mn);e.bindBuffer(j,null);let i=Rn(e,n.type),a=c/i,f=n.numComponents||n.size,s=a/f;if(s%1!==0)throw new Error(`numComponents ${f} not correct for length ${length}`);return s}function $e(e,t,r){let o=In(e,t),n=Object.assign({},r||{});n.attribs=Object.assign({},r?r.attribs:{},o);let c=t.indices;if(c){let i=pe(c,"indices");n.indices=Ve(e,i,_t),n.numElements=i.length,n.elementType=Ge(i)}else n.numElements||(n.numElements=dn(e,n.attribs));return n}function Bn(e,t,r){let o=r==="indices"?_t:j,n=pe(t,r);return Ve(e,n,o)}function Cn(e,t){let r={};return Object.keys(t).forEach(function(o){r[o]=Bn(e,t[o],o)}),t.indices?(r.numElements=t.indices.length,r.elementType=Ge(pe(t.indices))):r.numElements=Pn(t),r}function Nn(e,t){let r=0;return e.push=function(){for(let o=0;o<arguments.length;++o){let n=arguments[o];if(n instanceof Array||me(n))for(let c=0;c<n.length;++c)e[r++]=n[c];else e[r++]=n}},e.reset=function(o){r=o||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function P(e,t,r){let o=r||Float32Array;return Nn(new o(e*t),e)}function Xe(e,t,r){let o=e.length,n=new Float32Array(3);for(let c=0;c<o;c+=3)r(t,[e[c],e[c+1],e[c+2]],n),e[c]=n[0],e[c+1]=n[1],e[c+2]=n[2]}function Un(e,t,r){r=r||Ce();let o=t[0],n=t[1],c=t[2];return r[0]=o*e[0*4+0]+n*e[0*4+1]+c*e[0*4+2],r[1]=o*e[1*4+0]+n*e[1*4+1]+c*e[1*4+2],r[2]=o*e[2*4+0]+n*e[2*4+1]+c*e[2*4+2],r}function Dn(e,t){return Xe(e,t,Qr),e}function Ln(e,t){return Xe(e,Zr(t),Un),e}function On(e,t){return Xe(e,t,qr),e}function zn(e,t){return Object.keys(e).forEach(function(r){let o=e[r];r.indexOf("pos")>=0?On(o,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?Dn(o,t):r.indexOf("norm")>=0&&Ln(o,t)}),e}function wt(e,t,r){return e=e||2,t=t||0,r=r||0,e*=.5,{position:{numComponents:2,data:[t+-1*e,r+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function It(e,t,r,o,n){e=e||1,t=t||1,r=r||1,o=o||1,n=n||Kr();let c=(r+1)*(o+1),i=P(3,c),a=P(3,c),f=P(2,c);for(let p=0;p<=o;p++)for(let y=0;y<=r;y++){let h=y/r,m=p/o;i.push(e*h-e*.5,0,t*m-t*.5),a.push(0,1,0),f.push(h,m)}let s=r+1,l=P(3,r*o*2,Uint16Array);for(let p=0;p<o;p++)for(let y=0;y<r;y++)l.push((p+0)*s+y,(p+1)*s+y,(p+0)*s+y+1),l.push((p+1)*s+y,(p+1)*s+y+1,(p+0)*s+y+1);return zn({position:i,normal:a,texcoord:f,indices:l},n)}function Rt(e,t,r,o,n,c,i){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");o=o||0,n=n||Math.PI,c=c||0,i=i||Math.PI*2;let a=n-o,f=i-c,s=(t+1)*(r+1),l=P(3,s),x=P(3,s),p=P(2,s);for(let m=0;m<=r;m++)for(let u=0;u<=t;u++){let E=u/t,v=m/r,T=f*E+c,A=a*v+o,b=Math.sin(T),_=Math.cos(T),g=Math.sin(A),F=Math.cos(A),S=_*g,w=F,R=b*g;l.push(e*S,e*w,e*R),x.push(S,w,R),p.push(1-E,v)}let y=t+1,h=P(3,t*r*2,Uint16Array);for(let m=0;m<t;m++)for(let u=0;u<r;u++)h.push((u+0)*y+m,(u+0)*y+m+1,(u+1)*y+m),h.push((u+1)*y+m,(u+0)*y+m+1,(u+1)*y+m+1);return{position:l,normal:x,texcoord:p,indices:h}}var Gn=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Pt(e){e=e||1;let t=e/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],o=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],n=[[1,0],[0,0],[0,1],[1,1]],c=6*4,i=P(3,c),a=P(3,c),f=P(2,c),s=P(3,6*2,Uint16Array);for(let l=0;l<6;++l){let x=Gn[l];for(let y=0;y<4;++y){let h=r[x[y]],m=o[l],u=n[y];i.push(h),a.push(m),f.push(u)}let p=4*l;s.push(p+0,p+1,p+2),s.push(p+0,p+2,p+3)}return{position:i,normal:a,texcoord:f,indices:s}}function Ye(e,t,r,o,n,c,i){if(o<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<1)throw new Error("verticalSubdivisions must be 1 or greater");let a=c===void 0?!0:c,f=i===void 0?!0:i,s=(a?2:0)+(f?2:0),l=(o+1)*(n+1+s),x=P(3,l),p=P(3,l),y=P(2,l),h=P(3,o*(n+s/2)*2,Uint16Array),m=o+1,u=Math.atan2(e-t,r),E=Math.cos(u),v=Math.sin(u),T=a?-2:0,A=n+(f?2:0);for(let b=T;b<=A;++b){let _=b/n,g=r*_,F;b<0?(g=0,_=1,F=e):b>n?(g=r,_=1,F=t):F=e+(t-e)*(b/n),(b===-2||b===n+2)&&(F=0,_=0),g-=r/2;for(let S=0;S<m;++S){let w=Math.sin(S*Math.PI*2/o),R=Math.cos(S*Math.PI*2/o);x.push(w*F,g,R*F),b<0?p.push(0,-1,0):b>n?p.push(0,1,0):F===0?p.push(0,0,0):p.push(w*E,v,R*E),y.push(S/o,1-_)}}for(let b=0;b<n+s;++b)if(!(b===1&&a||b===n+s-2&&f))for(let _=0;_<o;++_)h.push(m*(b+0)+0+_,m*(b+0)+1+_,m*(b+1)+1+_),h.push(m*(b+0)+0+_,m*(b+1)+1+_,m*(b+1)+0+_);return{position:x,normal:p,texcoord:y,indices:h}}function ft(e,t){t=t||[];let r=[];for(let o=0;o<e.length;o+=4){let n=e[o],c=e.slice(o+1,o+4);c.push.apply(c,t);for(let i=0;i<n;++i)r.push.apply(r,c)}return r}function dt(){let e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],r=ft([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),o=ft([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,c={position:P(3,n),texcoord:P(2,n),normal:P(3,n),color:P(4,n,Uint8Array),indices:P(3,n/3,Uint16Array)};c.position.push(e),c.texcoord.push(t),c.normal.push(r),c.color.push(o);for(let i=0;i<n;++i)c.indices.push(i);return c}function Bt(e,t,r,o,n,c,i){if(n<=0)throw new Error("subdivisionDown must be > 0");c=c||0,i=i||1;let a=2,f=i-c,s=(n+1)*2*(2+a),l=P(3,s),x=P(3,s),p=P(2,s);function y(v,T,A){return v+(T-v)*A}function h(v,T,A,b,_,g){for(let F=0;F<=n;F++){let S=T/(a-1),w=F/n,R=(S-.5)*2,d=(c+w*f)*Math.PI,B=Math.sin(d),I=Math.cos(d),D=y(e,v,B),G=R*o,V=I*e,X=B*D;l.push(G,V,X);let Y=jr(Wr([0,B,I],A),b);x.push(Y),p.push(S*_+g,w)}}for(let v=0;v<a;v++){let T=(v/(a-1)-.5)*2;h(t,v,[1,1,1],[0,0,0],1,0),h(t,v,[0,0,0],[T,0,0],0,0),h(r,v,[1,1,1],[0,0,0],1,0),h(r,v,[0,0,0],[T,0,0],0,1)}let m=P(3,n*2*(2+a),Uint16Array);function u(v,T){for(let A=0;A<n;++A)m.push(v+A+0,v+A+1,T+A+0),m.push(v+A+1,T+A+1,T+A+0)}let E=n+1;return u(E*0,E*4),u(E*5,E*7),u(E*6,E*2),u(E*3,E*1),{position:l,normal:x,texcoord:p,indices:m}}function Ct(e,t,r,o,n,c){return Ye(e,e,t,r,o,n,c)}function Nt(e,t,r,o,n,c){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<3)throw new Error("verticalSubdivisions must be 3 or greater");n=n||0,c=c||Math.PI*2;let i=c-n,a=r+1,f=o+1,s=a*f,l=P(3,s),x=P(3,s),p=P(2,s),y=P(3,r*o*2,Uint16Array);for(let h=0;h<f;++h){let m=h/o,u=m*Math.PI*2,E=Math.sin(u),v=e+E*t,T=Math.cos(u),A=T*t;for(let b=0;b<a;++b){let _=b/r,g=n+_*i,F=Math.sin(g),S=Math.cos(g),w=F*v,R=S*v,d=F*E,B=S*E;l.push(w,A,R),x.push(d,T,B),p.push(_,1-m)}}for(let h=0;h<o;++h)for(let m=0;m<r;++m){let u=1+m,E=1+h;y.push(a*h+m,a*E+m,a*h+u),y.push(a*E+m,a*E+u,a*h+u)}return{position:l,normal:x,texcoord:p,indices:y}}function Ut(e,t,r,o,n){if(t<3)throw new Error("divisions must be at least 3");r=r||1,n=n||1,o=o||0;let c=(t+1)*(r+1),i=P(3,c),a=P(3,c),f=P(2,c),s=P(3,r*t*2,Uint16Array),l=0,x=e-o,p=t+1;for(let y=0;y<=r;++y){let h=o+x*Math.pow(y/r,n);for(let m=0;m<=t;++m){let u=2*Math.PI*m/t,E=h*Math.cos(u),v=h*Math.sin(u);if(i.push(E,0,v),a.push(0,1,0),f.push(1-m/t,y/r),y>0&&m!==t){let T=l+(m+1),A=l+m,b=l+m-p,_=l+(m+1)-p;s.push(T,A,b),s.push(T,b,_)}}l+=t+1}return{position:i,normal:a,texcoord:f,indices:s}}function k(e){return function(t){let r=e.apply(this,Array.prototype.slice.call(arguments,1));return Cn(t,r)}}function $(e){return function(t){let r=e.apply(null,Array.prototype.slice.call(arguments,1));return $e(t,r)}}var gi=$(dt),wi=k(dt),Ii=$(Pt),Ri=k(Pt),Pi=$(It),di=k(It),Bi=$(Rt),Ci=k(Rt),Ni=$(Ye),Ui=k(Ye),Di=$(wt),Li=k(wt),Oi=$(Bt),zi=k(Bt),Gi=$(Ct),Vi=k(Ct),ki=$(Nt),$i=k(Nt),Xi=$(Ut),Yi=k(Ut);function He(e){return!!e.texStorage2D}var Vn=function(){let e={},t={};function r(o){let n=o.constructor.name;if(!e[n]){for(let c in o)if(typeof o[c]=="number"){let i=t[o[c]];t[o[c]]=i?`${i} | ${c}`:c}e[n]=!0}}return function(n,c){return r(n),t[c]||(typeof c=="number"?`0x${c.toString(16)}`:c)}}();var Hi={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0};var ji=function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),kn=6406,lt=6407,ut=6408,$n=6409,Xn=6410,Yn=6402,Hn=34041;var jn=33319,Wn=33320,Kn=6403,Zn=36244,qn=36248,Qn=36249,Jn={};{let e=Jn;e[kn]={numColorComponents:1},e[$n]={numColorComponents:1},e[Xn]={numColorComponents:2},e[lt]={numColorComponents:3},e[ut]={numColorComponents:4},e[Kn]={numColorComponents:1},e[Zn]={numColorComponents:1},e[jn]={numColorComponents:2},e[Wn]={numColorComponents:2},e[lt]={numColorComponents:3},e[qn]={numColorComponents:3},e[ut]={numColorComponents:4},e[Qn]={numColorComponents:4},e[Yn]={numColorComponents:1},e[Hn]={numColorComponents:2}}var je=ln;function Dt(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}var xe=33984;var ye=34962,eo=34963;var to=35713,ro=35714,no=35632,oo=35633,co=35981,Lt=35718,io=35721,ao=35971,so=35382,fo=35396,lo=35398,uo=35392,mo=35395,he=5126,Ot=35664,zt=35665,Gt=35666,We=5124,Vt=35667,kt=35668,$t=35669,Xt=35670,Yt=35671,Ht=35672,jt=35673,Wt=35674,Kt=35675,Zt=35676,xo=35678,po=35680,yo=35679,ho=35682,Eo=35685,bo=35686,To=35687,Ao=35688,_o=35689,vo=35690,Fo=36289,So=36292,Mo=36293,Ke=5125,qt=36294,Qt=36295,Jt=36296,go=36298,wo=36299,Io=36300,Ro=36303,Po=36306,Bo=36307,Co=36308,No=36311,Ee=3553,be=34067,Ze=32879,Te=35866,M={};function er(e,t){return M[t].bindPoint}function Uo(e,t){return function(r){e.uniform1f(t,r)}}function Do(e,t){return function(r){e.uniform1fv(t,r)}}function Lo(e,t){return function(r){e.uniform2fv(t,r)}}function Oo(e,t){return function(r){e.uniform3fv(t,r)}}function zo(e,t){return function(r){e.uniform4fv(t,r)}}function tr(e,t){return function(r){e.uniform1i(t,r)}}function rr(e,t){return function(r){e.uniform1iv(t,r)}}function nr(e,t){return function(r){e.uniform2iv(t,r)}}function or(e,t){return function(r){e.uniform3iv(t,r)}}function cr(e,t){return function(r){e.uniform4iv(t,r)}}function Go(e,t){return function(r){e.uniform1ui(t,r)}}function Vo(e,t){return function(r){e.uniform1uiv(t,r)}}function ko(e,t){return function(r){e.uniform2uiv(t,r)}}function $o(e,t){return function(r){e.uniform3uiv(t,r)}}function Xo(e,t){return function(r){e.uniform4uiv(t,r)}}function Yo(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}function Ho(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}function jo(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}function Wo(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}function Ko(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}function Zo(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}function qo(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}function Qo(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}function Jo(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}function O(e,t,r,o){let n=er(e,t);return He(e)?function(c){let i,a;!c||Tt(e,c)?(i=c,a=null):(i=c.texture,a=c.sampler),e.uniform1i(o,r),e.activeTexture(xe+r),e.bindTexture(n,i),e.bindSampler(r,a)}:function(c){e.uniform1i(o,r),e.activeTexture(xe+r),e.bindTexture(n,c)}}function z(e,t,r,o,n){let c=er(e,t),i=new Int32Array(n);for(let a=0;a<n;++a)i[a]=r+a;return He(e)?function(a){e.uniform1iv(o,i),a.forEach(function(f,s){e.activeTexture(xe+i[s]);let l,x;!f||Tt(e,f)?(l=f,x=null):(l=f.texture,x=f.sampler),e.bindSampler(r,x),e.bindTexture(c,l)})}:function(a){e.uniform1iv(o,i),a.forEach(function(f,s){e.activeTexture(xe+i[s]),e.bindTexture(c,f)})}}M[he]={Type:Float32Array,size:4,setter:Uo,arraySetter:Do};M[Ot]={Type:Float32Array,size:8,setter:Lo,cols:2};M[zt]={Type:Float32Array,size:12,setter:Oo,cols:3};M[Gt]={Type:Float32Array,size:16,setter:zo,cols:4};M[We]={Type:Int32Array,size:4,setter:tr,arraySetter:rr};M[Vt]={Type:Int32Array,size:8,setter:nr,cols:2};M[kt]={Type:Int32Array,size:12,setter:or,cols:3};M[$t]={Type:Int32Array,size:16,setter:cr,cols:4};M[Ke]={Type:Uint32Array,size:4,setter:Go,arraySetter:Vo};M[qt]={Type:Uint32Array,size:8,setter:ko,cols:2};M[Qt]={Type:Uint32Array,size:12,setter:$o,cols:3};M[Jt]={Type:Uint32Array,size:16,setter:Xo,cols:4};M[Xt]={Type:Uint32Array,size:4,setter:tr,arraySetter:rr};M[Yt]={Type:Uint32Array,size:8,setter:nr,cols:2};M[Ht]={Type:Uint32Array,size:12,setter:or,cols:3};M[jt]={Type:Uint32Array,size:16,setter:cr,cols:4};M[Wt]={Type:Float32Array,size:32,setter:Yo,rows:2,cols:2};M[Kt]={Type:Float32Array,size:48,setter:Ho,rows:3,cols:3};M[Zt]={Type:Float32Array,size:64,setter:jo,rows:4,cols:4};M[Eo]={Type:Float32Array,size:32,setter:Wo,rows:2,cols:3};M[bo]={Type:Float32Array,size:32,setter:Zo,rows:2,cols:4};M[To]={Type:Float32Array,size:48,setter:Ko,rows:3,cols:2};M[Ao]={Type:Float32Array,size:48,setter:Qo,rows:3,cols:4};M[_o]={Type:Float32Array,size:64,setter:qo,rows:4,cols:2};M[vo]={Type:Float32Array,size:64,setter:Jo,rows:4,cols:3};M[xo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ee};M[po]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:be};M[yo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ze};M[ho]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ee};M[Fo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Te};M[So]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Te};M[Mo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:be};M[go]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ee};M[wo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ze};M[Io]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:be};M[Ro]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Te};M[Po]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ee};M[Bo]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Ze};M[Co]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:be};M[No]={Type:null,size:0,setter:O,arraySetter:z,bindPoint:Te};function Ae(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(ye,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||he,r.normalize||!1,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function W(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4iv(t,r.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(ye,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||We,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function _e(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4uiv(t,r.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(ye,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||Ke,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function qe(e,t,r){let o=r.size,n=r.count;return function(c){e.bindBuffer(ye,c.buffer);let i=c.size||c.numComponents||o,a=i/n,f=c.type||he,l=M[f].size*i,x=c.normalize||!1,p=c.offset||0,y=l/n;for(let h=0;h<n;++h)e.enableVertexAttribArray(t+h),e.vertexAttribPointer(t+h,a,f,x,l,p+y*h),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+h,c.divisor||0)}}var U={};U[he]={size:4,setter:Ae};U[Ot]={size:8,setter:Ae};U[zt]={size:12,setter:Ae};U[Gt]={size:16,setter:Ae};U[We]={size:4,setter:W};U[Vt]={size:8,setter:W};U[kt]={size:12,setter:W};U[$t]={size:16,setter:W};U[Ke]={size:4,setter:_e};U[qt]={size:8,setter:_e};U[Qt]={size:12,setter:_e};U[Jt]={size:16,setter:_e};U[Xt]={size:4,setter:W};U[Yt]={size:8,setter:W};U[Ht]={size:12,setter:W};U[jt]={size:16,setter:W};U[Wt]={size:4,setter:qe,count:2};U[Kt]={size:9,setter:qe,count:3};U[Zt]={size:16,setter:qe,count:4};var ec=/ERROR:\s*\d+:(\d+)/gi;function tc(e,t="",r=0){let o=[...t.matchAll(ec)],n=new Map(o.map((c,i)=>{let a=parseInt(c[1]),f=o[i+1],s=f?f.index:t.length,l=t.substring(c.index,s);return[a-1,l]}));return e.split(`
`).map((c,i)=>{let a=n.get(i);return`${i+1+r}: ${c}${a?`

^^^ ${a}`:""}`}).join(`
`)}var mt=/^[ \t]*\n/;function ir(e){let t=0;return mt.test(e)&&(t=1,e=e.replace(mt,"")),{lineOffset:t,shaderSource:e}}function rc(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function nc(e,t,r,o){if(o=o||je,!e.getShaderParameter(r,to)){let c=e.getShaderInfoLog(r),{lineOffset:i,shaderSource:a}=ir(e.getShaderSource(r)),f=`${tc(a,c,i)}
Error compiling ${Vn(e,t)}: ${c}`;return o(f),f}return""}function ne(e,t,r){let o,n,c;if(typeof t=="function"&&(r=t,t=void 0),typeof e=="function")r=e,e=void 0;else if(e&&!Array.isArray(e)){let s=e;r=s.errorCallback,e=s.attribLocations,o=s.transformFeedbackVaryings,n=s.transformFeedbackMode,c=s.callback}let i=r||je,a=[],f={errorCallback(s,...l){a.push(s),i(s,...l)},transformFeedbackVaryings:o,transformFeedbackMode:n,callback:c,errors:a};{let s={};Array.isArray(e)?e.forEach(function(l,x){s[l]=t?t[x]:x}):s=e||{},f.attribLocations=s}return f}var oc=["VERTEX_SHADER","FRAGMENT_SHADER"];function cc(e,t){if(t.indexOf("frag")>=0)return no;if(t.indexOf("vert")>=0)return oo}function ic(e,t,r){let o=e.getAttachedShaders(t);for(let n of o)r.has(n)&&e.deleteShader(n);e.deleteProgram(t)}var ac=(e=0)=>new Promise(t=>setTimeout(t,e));function ar(e,t,r){let o=e.createProgram(),{attribLocations:n,transformFeedbackVaryings:c,transformFeedbackMode:i}=ne(r);for(let a=0;a<t.length;++a){let f=t[a];if(typeof f=="string"){let s=Dt(f),l=s?s.text:f,x=e[oc[a]];s&&s.type&&(x=cc(e,s.type)||x),f=e.createShader(x),e.shaderSource(f,ir(l).shaderSource),e.compileShader(f),e.attachShader(o,f)}}Object.entries(n).forEach(([a,f])=>e.bindAttribLocation(o,f,a));{let a=c;a&&(a.attribs&&(a=a.attribs),Array.isArray(a)||(a=Object.keys(a)),e.transformFeedbackVaryings(o,a,i||co))}return e.linkProgram(o),o}function sr(e,t,r,o,n){let c=ne(r,o,n),i=new Set(t),a=ar(e,t,c);function f(s,l){let x=lr(s,l,c.errorCallback);return x&&ic(s,l,i),x}if(c.callback){fr(e,a).then(()=>{let s=f(e,a);c.callback(s,s?void 0:a)});return}return f(e,a)?void 0:a}function ve(e){return function(t,r,...o){return new Promise((n,c)=>{let i=ne(...o);i.callback=(a,f)=>{a?c(a):n(f)},e(t,r,i)})}}var Wi=ve(sr),Ki=ve(Qe);async function fr(e,t){let r=e.getExtension("KHR_parallel_shader_compile"),o=r?(c,i)=>c.getProgramParameter(i,r.COMPLETION_STATUS_KHR):()=>!0,n=0;do await ac(n),n=1e3/60;while(!o(e,t))}async function sc(e,t){for(let r of Object.values(t))await fr(e,r)}function lr(e,t,r){if(r=r||je,!e.getProgramParameter(t,ro)){let n=e.getProgramInfoLog(t);r(`Error in program linking: ${n}`);let i=e.getAttachedShaders(t).map(a=>nc(e,e.getShaderParameter(a,e.SHADER_TYPE),a,r));return`${n}
${i.filter(a=>a).join(`
`)}`}}function fc(e,t,r,o,n){return sr(e,t,r,o,n)}function ur(e){let t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}var lc=/(\.|\[|]|\w+)/g,uc=e=>e>="0"&&e<="9";function mc(e,t,r,o){let n=e.split(lc).filter(a=>a!==""),c=0,i="";for(;;){let a=n[c++];i+=a;let f=uc(a[0]),s=f?parseInt(a):a;if(f&&(i+=n[c++]),c===n.length){r[s]=t;break}else{let x=n[c++],p=x==="[",y=r[s]||(p?[]:{});r[s]=y,r=y,o[i]=o[i]||function(h){return function(m){mr(h,m)}}(y),i+=x}}}function xc(e,t){let r=0;function o(a,f,s){let l=f.name.endsWith("[0]"),x=f.type,p=M[x];if(!p)throw new Error(`unknown type: 0x${x.toString(16)}`);let y;if(p.bindPoint){let h=r;r+=f.size,l?y=p.arraySetter(e,x,h,s,f.size):y=p.setter(e,x,h,s,f.size)}else p.arraySetter&&l?y=p.arraySetter(e,s):y=p.setter(e,s);return y.location=s,y}let n={},c={},i=e.getProgramParameter(t,Lt);for(let a=0;a<i;++a){let f=e.getActiveUniform(t,a);if(ur(f))continue;let s=f.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));let l=e.getUniformLocation(t,f.name);if(l){let x=o(t,f,l);n[s]=x,mc(s,x,c,n)}}return n}function pc(e,t){let r={},o=e.getProgramParameter(t,ao);for(let n=0;n<o;++n){let c=e.getTransformFeedbackVarying(t,n);r[c.name]={index:n,type:c.type,size:c.size}}return r}function yc(e,t){let r=e.getProgramParameter(t,Lt),o=[],n=[];for(let a=0;a<r;++a){n.push(a),o.push({});let f=e.getActiveUniform(t,a);o[a].name=f.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){let f=a[0],s=a[1];e.getActiveUniforms(t,n,e[f]).forEach(function(l,x){o[x][s]=l})});let c={},i=e.getProgramParameter(t,so);for(let a=0;a<i;++a){let f=e.getActiveUniformBlockName(t,a),s={index:e.getUniformBlockIndex(t,f),usedByVertexShader:e.getActiveUniformBlockParameter(t,a,fo),usedByFragmentShader:e.getActiveUniformBlockParameter(t,a,lo),size:e.getActiveUniformBlockParameter(t,a,uo),uniformIndices:e.getActiveUniformBlockParameter(t,a,mo)};s.used=s.usedByVertexShader||s.usedByFragmentShader,c[f]=s}return{blockSpecs:c,uniformData:o}}function mr(e,t){for(let r in t){let o=e[r];typeof o=="function"?o(t[r]):mr(e[r],t[r])}}function K(e,...t){let r=e.uniformSetters||e,o=t.length;for(let n=0;n<o;++n){let c=t[n];if(Array.isArray(c)){let i=c.length;for(let a=0;a<i;++a)K(r,c[a])}else for(let i in c){let a=r[i];a&&a(c[i])}}}function hc(e,t){let r={},o=e.getProgramParameter(t,io);for(let n=0;n<o;++n){let c=e.getActiveAttrib(t,n);if(ur(c))continue;let i=e.getAttribLocation(t,c.name),a=U[c.type],f=a.setter(e,i,a);f.location=i,r[c.name]=f}return r}function Ec(e,t){for(let r in t){let o=e[r];o&&o(t[r])}}function xr(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(Ec(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(eo,r.indices))}function de(e,t){let r=xc(e,t),o=hc(e,t),n={program:t,uniformSetters:r,attribSetters:o};return He(e)&&(n.uniformBlockSpec=yc(e,t),n.transformFeedbackInfo=pc(e,t)),n}var bc=/\s|{|}|;/;function Qe(e,t,r,o,n){let c=ne(r,o,n),i=[];if(t=t.map(function(s){if(!bc.test(s)){let l=Dt(s);if(l)s=l.text;else{let x=`no element with id: ${s}`;c.errorCallback(x),i.push(x)}}return s}),i.length)return rc(c,"");let a=c.callback;a&&(c.callback=(s,l)=>{a(s,s?void 0:de(e,l))});let f=fc(e,t,c);return f?de(e,f):null}function xt(e,t,r,o,n){for(let[c,i]of Object.entries(t)){let a={...n},f=r[c];Array.isArray(f)||Object.assign(a,f);let s=lr(e,i,a.errorCallback);if(s){for(let l of Object.values(t)){let x=e.getAttachedShaders(l);e.deleteProgram(l);for(let p of x)o.has(p)||e.deleteShader(p)}return s}}}function pr(e,t,r={}){let o=new Set,n=Object.fromEntries(Object.entries(t).map(([i,a])=>{let f={...r},s=Array.isArray(a)?a:a.shaders;return Array.isArray(a)||Object.assign(f,a),s.forEach(o.add,o),[i,ar(e,s,f)]}));if(r.callback){sc(e,n).then(()=>{let i=xt(e,n,t,o,r);r.callback(i,i?void 0:n)});return}return xt(e,n,t,o,r)?void 0:n}function Tc(e,t,r){r=ne(r);function o(i,a){return Object.fromEntries(Object.entries(a).map(([f,s])=>[f,de(i,s)]))}let n=r.callback;n&&(r.callback=(i,a)=>{n(i,i?void 0:o(e,a))});let c=pr(e,t,r);if(!(n||!c))return o(e,c)}var Zi=ve(pr),qi=ve(Tc);var Ac=4,pt=5123;function yr(e,t,r,o,n,c){r=r===void 0?Ac:r;let i=t.indices,a=t.elementType,f=o===void 0?t.numElements:o;n=n===void 0?0:n,a||i?c!==void 0?e.drawElementsInstanced(r,f,a===void 0?pt:t.elementType,n,c):e.drawElements(r,f,a===void 0?pt:t.elementType,n):c!==void 0?e.drawArraysInstanced(r,n,f,c):e.drawArrays(r,n,f)}var _c=6402;var vc=33190,Fc=36012,Sc=35056,Mc=36013,gc=32854,wc=32855,Ic=36194,hr=33189,Er=6401,br=36168,Tr=34041;var Fe=36096,Ar=36128,Je=33306;var H={};H[Tr]=Je;H[Er]=Ar;H[br]=Ar;H[_c]=Fe;H[hr]=Fe;H[vc]=Fe;H[Fc]=Fe;H[Sc]=Je;H[Mc]=Je;var Z={};Z[gc]=!0;Z[wc]=!0;Z[Ic]=!0;Z[Tr]=!0;Z[hr]=!0;Z[Er]=!0;Z[br]=!0;function et(e,t){t=t||1,t=Math.max(0,t);let r=e.clientWidth*t|0,o=e.clientHeight*t|0;return e.width!==r||e.height!==o?(e.width=r,e.height=o,!0):!1}var Rc="u_mat",oe=class{constructor(t){this.diffuse=t.kd,this.specular=t.ks,this.shininess=t.ns,this.ambient=t.ka,this.emissive=t.ke}apply(t){let r=this.getUniforms();K(t,r)}getUniforms(){let t={};for(let[r,o]of Object.entries(this))o!==void 0&&(t[`${Rc}${r[0].toUpperCase()}${r.slice(1)}`]=o);return t}};var vr=te(J(),1);function ra(e){vr.setLevel(e)}var ee=te(J(),1);var N=1e-6,q=typeof Float32Array<"u"?Float32Array:Array;var oa=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var C={};Yr(C,{add:()=>pi,adjoint:()=>Oc,clone:()=>Bc,copy:()=>Cc,create:()=>dc,determinant:()=>zc,equals:()=>bi,exactEquals:()=>Ei,frob:()=>xi,fromQuat:()=>ni,fromQuat2:()=>Qc,fromRotation:()=>Wc,fromRotationTranslation:()=>Mr,fromRotationTranslationScale:()=>ti,fromRotationTranslationScaleOrigin:()=>ri,fromScaling:()=>jc,fromTranslation:()=>Hc,fromValues:()=>Nc,fromXRotation:()=>Kc,fromYRotation:()=>Zc,fromZRotation:()=>qc,frustum:()=>oi,getRotation:()=>ei,getScaling:()=>gr,getTranslation:()=>Jc,identity:()=>Fr,invert:()=>Lc,lookAt:()=>li,mul:()=>Ti,multiply:()=>Sr,multiplyScalar:()=>yi,multiplyScalarAndAdd:()=>hi,ortho:()=>si,orthoNO:()=>Ir,orthoZO:()=>fi,perspective:()=>ci,perspectiveFromFieldOfView:()=>ai,perspectiveNO:()=>wr,perspectiveZO:()=>ii,rotate:()=>kc,rotateX:()=>$c,rotateY:()=>Xc,rotateZ:()=>Yc,scale:()=>Vc,set:()=>Uc,str:()=>mi,sub:()=>Ai,subtract:()=>Rr,targetTo:()=>ui,translate:()=>Gc,transpose:()=>Dc});function dc(){var e=new q(16);return q!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Bc(e){var t=new q(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Cc(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Nc(e,t,r,o,n,c,i,a,f,s,l,x,p,y,h,m){var u=new q(16);return u[0]=e,u[1]=t,u[2]=r,u[3]=o,u[4]=n,u[5]=c,u[6]=i,u[7]=a,u[8]=f,u[9]=s,u[10]=l,u[11]=x,u[12]=p,u[13]=y,u[14]=h,u[15]=m,u}function Uc(e,t,r,o,n,c,i,a,f,s,l,x,p,y,h,m,u){return e[0]=t,e[1]=r,e[2]=o,e[3]=n,e[4]=c,e[5]=i,e[6]=a,e[7]=f,e[8]=s,e[9]=l,e[10]=x,e[11]=p,e[12]=y,e[13]=h,e[14]=m,e[15]=u,e}function Fr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Dc(e,t){if(e===t){var r=t[1],o=t[2],n=t[3],c=t[6],i=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=o,e[9]=c,e[11]=t[14],e[12]=n,e[13]=i,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Lc(e,t){var r=t[0],o=t[1],n=t[2],c=t[3],i=t[4],a=t[5],f=t[6],s=t[7],l=t[8],x=t[9],p=t[10],y=t[11],h=t[12],m=t[13],u=t[14],E=t[15],v=r*a-o*i,T=r*f-n*i,A=r*s-c*i,b=o*f-n*a,_=o*s-c*a,g=n*s-c*f,F=l*m-x*h,S=l*u-p*h,w=l*E-y*h,R=x*u-p*m,d=x*E-y*m,B=p*E-y*u,I=v*B-T*d+A*R+b*w-_*S+g*F;return I?(I=1/I,e[0]=(a*B-f*d+s*R)*I,e[1]=(n*d-o*B-c*R)*I,e[2]=(m*g-u*_+E*b)*I,e[3]=(p*_-x*g-y*b)*I,e[4]=(f*w-i*B-s*S)*I,e[5]=(r*B-n*w+c*S)*I,e[6]=(u*A-h*g-E*T)*I,e[7]=(l*g-p*A+y*T)*I,e[8]=(i*d-a*w+s*F)*I,e[9]=(o*w-r*d-c*F)*I,e[10]=(h*_-m*A+E*v)*I,e[11]=(x*A-l*_-y*v)*I,e[12]=(a*S-i*R-f*F)*I,e[13]=(r*R-o*S+n*F)*I,e[14]=(m*T-h*b-u*v)*I,e[15]=(l*b-x*T+p*v)*I,e):null}function Oc(e,t){var r=t[0],o=t[1],n=t[2],c=t[3],i=t[4],a=t[5],f=t[6],s=t[7],l=t[8],x=t[9],p=t[10],y=t[11],h=t[12],m=t[13],u=t[14],E=t[15];return e[0]=a*(p*E-y*u)-x*(f*E-s*u)+m*(f*y-s*p),e[1]=-(o*(p*E-y*u)-x*(n*E-c*u)+m*(n*y-c*p)),e[2]=o*(f*E-s*u)-a*(n*E-c*u)+m*(n*s-c*f),e[3]=-(o*(f*y-s*p)-a*(n*y-c*p)+x*(n*s-c*f)),e[4]=-(i*(p*E-y*u)-l*(f*E-s*u)+h*(f*y-s*p)),e[5]=r*(p*E-y*u)-l*(n*E-c*u)+h*(n*y-c*p),e[6]=-(r*(f*E-s*u)-i*(n*E-c*u)+h*(n*s-c*f)),e[7]=r*(f*y-s*p)-i*(n*y-c*p)+l*(n*s-c*f),e[8]=i*(x*E-y*m)-l*(a*E-s*m)+h*(a*y-s*x),e[9]=-(r*(x*E-y*m)-l*(o*E-c*m)+h*(o*y-c*x)),e[10]=r*(a*E-s*m)-i*(o*E-c*m)+h*(o*s-c*a),e[11]=-(r*(a*y-s*x)-i*(o*y-c*x)+l*(o*s-c*a)),e[12]=-(i*(x*u-p*m)-l*(a*u-f*m)+h*(a*p-f*x)),e[13]=r*(x*u-p*m)-l*(o*u-n*m)+h*(o*p-n*x),e[14]=-(r*(a*u-f*m)-i*(o*u-n*m)+h*(o*f-n*a)),e[15]=r*(a*p-f*x)-i*(o*p-n*x)+l*(o*f-n*a),e}function zc(e){var t=e[0],r=e[1],o=e[2],n=e[3],c=e[4],i=e[5],a=e[6],f=e[7],s=e[8],l=e[9],x=e[10],p=e[11],y=e[12],h=e[13],m=e[14],u=e[15],E=t*i-r*c,v=t*a-o*c,T=t*f-n*c,A=r*a-o*i,b=r*f-n*i,_=o*f-n*a,g=s*h-l*y,F=s*m-x*y,S=s*u-p*y,w=l*m-x*h,R=l*u-p*h,d=x*u-p*m;return E*d-v*R+T*w+A*S-b*F+_*g}function Sr(e,t,r){var o=t[0],n=t[1],c=t[2],i=t[3],a=t[4],f=t[5],s=t[6],l=t[7],x=t[8],p=t[9],y=t[10],h=t[11],m=t[12],u=t[13],E=t[14],v=t[15],T=r[0],A=r[1],b=r[2],_=r[3];return e[0]=T*o+A*a+b*x+_*m,e[1]=T*n+A*f+b*p+_*u,e[2]=T*c+A*s+b*y+_*E,e[3]=T*i+A*l+b*h+_*v,T=r[4],A=r[5],b=r[6],_=r[7],e[4]=T*o+A*a+b*x+_*m,e[5]=T*n+A*f+b*p+_*u,e[6]=T*c+A*s+b*y+_*E,e[7]=T*i+A*l+b*h+_*v,T=r[8],A=r[9],b=r[10],_=r[11],e[8]=T*o+A*a+b*x+_*m,e[9]=T*n+A*f+b*p+_*u,e[10]=T*c+A*s+b*y+_*E,e[11]=T*i+A*l+b*h+_*v,T=r[12],A=r[13],b=r[14],_=r[15],e[12]=T*o+A*a+b*x+_*m,e[13]=T*n+A*f+b*p+_*u,e[14]=T*c+A*s+b*y+_*E,e[15]=T*i+A*l+b*h+_*v,e}function Gc(e,t,r){var o=r[0],n=r[1],c=r[2],i,a,f,s,l,x,p,y,h,m,u,E;return t===e?(e[12]=t[0]*o+t[4]*n+t[8]*c+t[12],e[13]=t[1]*o+t[5]*n+t[9]*c+t[13],e[14]=t[2]*o+t[6]*n+t[10]*c+t[14],e[15]=t[3]*o+t[7]*n+t[11]*c+t[15]):(i=t[0],a=t[1],f=t[2],s=t[3],l=t[4],x=t[5],p=t[6],y=t[7],h=t[8],m=t[9],u=t[10],E=t[11],e[0]=i,e[1]=a,e[2]=f,e[3]=s,e[4]=l,e[5]=x,e[6]=p,e[7]=y,e[8]=h,e[9]=m,e[10]=u,e[11]=E,e[12]=i*o+l*n+h*c+t[12],e[13]=a*o+x*n+m*c+t[13],e[14]=f*o+p*n+u*c+t[14],e[15]=s*o+y*n+E*c+t[15]),e}function Vc(e,t,r){var o=r[0],n=r[1],c=r[2];return e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*c,e[9]=t[9]*c,e[10]=t[10]*c,e[11]=t[11]*c,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function kc(e,t,r,o){var n=o[0],c=o[1],i=o[2],a=Math.hypot(n,c,i),f,s,l,x,p,y,h,m,u,E,v,T,A,b,_,g,F,S,w,R,d,B,I,D;return a<N?null:(a=1/a,n*=a,c*=a,i*=a,f=Math.sin(r),s=Math.cos(r),l=1-s,x=t[0],p=t[1],y=t[2],h=t[3],m=t[4],u=t[5],E=t[6],v=t[7],T=t[8],A=t[9],b=t[10],_=t[11],g=n*n*l+s,F=c*n*l+i*f,S=i*n*l-c*f,w=n*c*l-i*f,R=c*c*l+s,d=i*c*l+n*f,B=n*i*l+c*f,I=c*i*l-n*f,D=i*i*l+s,e[0]=x*g+m*F+T*S,e[1]=p*g+u*F+A*S,e[2]=y*g+E*F+b*S,e[3]=h*g+v*F+_*S,e[4]=x*w+m*R+T*d,e[5]=p*w+u*R+A*d,e[6]=y*w+E*R+b*d,e[7]=h*w+v*R+_*d,e[8]=x*B+m*I+T*D,e[9]=p*B+u*I+A*D,e[10]=y*B+E*I+b*D,e[11]=h*B+v*I+_*D,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function $c(e,t,r){var o=Math.sin(r),n=Math.cos(r),c=t[4],i=t[5],a=t[6],f=t[7],s=t[8],l=t[9],x=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=c*n+s*o,e[5]=i*n+l*o,e[6]=a*n+x*o,e[7]=f*n+p*o,e[8]=s*n-c*o,e[9]=l*n-i*o,e[10]=x*n-a*o,e[11]=p*n-f*o,e}function Xc(e,t,r){var o=Math.sin(r),n=Math.cos(r),c=t[0],i=t[1],a=t[2],f=t[3],s=t[8],l=t[9],x=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=c*n-s*o,e[1]=i*n-l*o,e[2]=a*n-x*o,e[3]=f*n-p*o,e[8]=c*o+s*n,e[9]=i*o+l*n,e[10]=a*o+x*n,e[11]=f*o+p*n,e}function Yc(e,t,r){var o=Math.sin(r),n=Math.cos(r),c=t[0],i=t[1],a=t[2],f=t[3],s=t[4],l=t[5],x=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=c*n+s*o,e[1]=i*n+l*o,e[2]=a*n+x*o,e[3]=f*n+p*o,e[4]=s*n-c*o,e[5]=l*n-i*o,e[6]=x*n-a*o,e[7]=p*n-f*o,e}function Hc(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function jc(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Wc(e,t,r){var o=r[0],n=r[1],c=r[2],i=Math.hypot(o,n,c),a,f,s;return i<N?null:(i=1/i,o*=i,n*=i,c*=i,a=Math.sin(t),f=Math.cos(t),s=1-f,e[0]=o*o*s+f,e[1]=n*o*s+c*a,e[2]=c*o*s-n*a,e[3]=0,e[4]=o*n*s-c*a,e[5]=n*n*s+f,e[6]=c*n*s+o*a,e[7]=0,e[8]=o*c*s+n*a,e[9]=n*c*s-o*a,e[10]=c*c*s+f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Kc(e,t){var r=Math.sin(t),o=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Zc(e,t){var r=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function qc(e,t){var r=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Mr(e,t,r){var o=t[0],n=t[1],c=t[2],i=t[3],a=o+o,f=n+n,s=c+c,l=o*a,x=o*f,p=o*s,y=n*f,h=n*s,m=c*s,u=i*a,E=i*f,v=i*s;return e[0]=1-(y+m),e[1]=x+v,e[2]=p-E,e[3]=0,e[4]=x-v,e[5]=1-(l+m),e[6]=h+u,e[7]=0,e[8]=p+E,e[9]=h-u,e[10]=1-(l+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Qc(e,t){var r=new q(3),o=-t[0],n=-t[1],c=-t[2],i=t[3],a=t[4],f=t[5],s=t[6],l=t[7],x=o*o+n*n+c*c+i*i;return x>0?(r[0]=(a*i+l*o+f*c-s*n)*2/x,r[1]=(f*i+l*n+s*o-a*c)*2/x,r[2]=(s*i+l*c+a*n-f*o)*2/x):(r[0]=(a*i+l*o+f*c-s*n)*2,r[1]=(f*i+l*n+s*o-a*c)*2,r[2]=(s*i+l*c+a*n-f*o)*2),Mr(e,t,r),e}function Jc(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function gr(e,t){var r=t[0],o=t[1],n=t[2],c=t[4],i=t[5],a=t[6],f=t[8],s=t[9],l=t[10];return e[0]=Math.hypot(r,o,n),e[1]=Math.hypot(c,i,a),e[2]=Math.hypot(f,s,l),e}function ei(e,t){var r=new q(3);gr(r,t);var o=1/r[0],n=1/r[1],c=1/r[2],i=t[0]*o,a=t[1]*n,f=t[2]*c,s=t[4]*o,l=t[5]*n,x=t[6]*c,p=t[8]*o,y=t[9]*n,h=t[10]*c,m=i+l+h,u=0;return m>0?(u=Math.sqrt(m+1)*2,e[3]=.25*u,e[0]=(x-y)/u,e[1]=(p-f)/u,e[2]=(a-s)/u):i>l&&i>h?(u=Math.sqrt(1+i-l-h)*2,e[3]=(x-y)/u,e[0]=.25*u,e[1]=(a+s)/u,e[2]=(p+f)/u):l>h?(u=Math.sqrt(1+l-i-h)*2,e[3]=(p-f)/u,e[0]=(a+s)/u,e[1]=.25*u,e[2]=(x+y)/u):(u=Math.sqrt(1+h-i-l)*2,e[3]=(a-s)/u,e[0]=(p+f)/u,e[1]=(x+y)/u,e[2]=.25*u),e}function ti(e,t,r,o){var n=t[0],c=t[1],i=t[2],a=t[3],f=n+n,s=c+c,l=i+i,x=n*f,p=n*s,y=n*l,h=c*s,m=c*l,u=i*l,E=a*f,v=a*s,T=a*l,A=o[0],b=o[1],_=o[2];return e[0]=(1-(h+u))*A,e[1]=(p+T)*A,e[2]=(y-v)*A,e[3]=0,e[4]=(p-T)*b,e[5]=(1-(x+u))*b,e[6]=(m+E)*b,e[7]=0,e[8]=(y+v)*_,e[9]=(m-E)*_,e[10]=(1-(x+h))*_,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function ri(e,t,r,o,n){var c=t[0],i=t[1],a=t[2],f=t[3],s=c+c,l=i+i,x=a+a,p=c*s,y=c*l,h=c*x,m=i*l,u=i*x,E=a*x,v=f*s,T=f*l,A=f*x,b=o[0],_=o[1],g=o[2],F=n[0],S=n[1],w=n[2],R=(1-(m+E))*b,d=(y+A)*b,B=(h-T)*b,I=(y-A)*_,D=(1-(p+E))*_,G=(u+v)*_,V=(h+T)*g,X=(u-v)*g,Y=(1-(p+m))*g;return e[0]=R,e[1]=d,e[2]=B,e[3]=0,e[4]=I,e[5]=D,e[6]=G,e[7]=0,e[8]=V,e[9]=X,e[10]=Y,e[11]=0,e[12]=r[0]+F-(R*F+I*S+V*w),e[13]=r[1]+S-(d*F+D*S+X*w),e[14]=r[2]+w-(B*F+G*S+Y*w),e[15]=1,e}function ni(e,t){var r=t[0],o=t[1],n=t[2],c=t[3],i=r+r,a=o+o,f=n+n,s=r*i,l=o*i,x=o*a,p=n*i,y=n*a,h=n*f,m=c*i,u=c*a,E=c*f;return e[0]=1-x-h,e[1]=l+E,e[2]=p-u,e[3]=0,e[4]=l-E,e[5]=1-s-h,e[6]=y+m,e[7]=0,e[8]=p+u,e[9]=y-m,e[10]=1-s-x,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oi(e,t,r,o,n,c,i){var a=1/(r-t),f=1/(n-o),s=1/(c-i);return e[0]=c*2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c*2*f,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(n+o)*f,e[10]=(i+c)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*c*2*s,e[15]=0,e}function wr(e,t,r,o,n){var c=1/Math.tan(t/2),i;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(i=1/(o-n),e[10]=(n+o)*i,e[14]=2*n*o*i):(e[10]=-1,e[14]=-2*o),e}var ci=wr;function ii(e,t,r,o,n){var c=1/Math.tan(t/2),i;return e[0]=c/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(i=1/(o-n),e[10]=n*i,e[14]=n*o*i):(e[10]=-1,e[14]=-o),e}function ai(e,t,r,o){var n=Math.tan(t.upDegrees*Math.PI/180),c=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),f=2/(i+a),s=2/(n+c);return e[0]=f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=-((i-a)*f*.5),e[9]=(n-c)*s*.5,e[10]=o/(r-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*r/(r-o),e[15]=0,e}function Ir(e,t,r,o,n,c,i){var a=1/(t-r),f=1/(o-n),s=1/(c-i);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*s,e[11]=0,e[12]=(t+r)*a,e[13]=(n+o)*f,e[14]=(i+c)*s,e[15]=1,e}var si=Ir;function fi(e,t,r,o,n,c,i){var a=1/(t-r),f=1/(o-n),s=1/(c-i);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=s,e[11]=0,e[12]=(t+r)*a,e[13]=(n+o)*f,e[14]=c*s,e[15]=1,e}function li(e,t,r,o){var n,c,i,a,f,s,l,x,p,y,h=t[0],m=t[1],u=t[2],E=o[0],v=o[1],T=o[2],A=r[0],b=r[1],_=r[2];return Math.abs(h-A)<N&&Math.abs(m-b)<N&&Math.abs(u-_)<N?Fr(e):(l=h-A,x=m-b,p=u-_,y=1/Math.hypot(l,x,p),l*=y,x*=y,p*=y,n=v*p-T*x,c=T*l-E*p,i=E*x-v*l,y=Math.hypot(n,c,i),y?(y=1/y,n*=y,c*=y,i*=y):(n=0,c=0,i=0),a=x*i-p*c,f=p*n-l*i,s=l*c-x*n,y=Math.hypot(a,f,s),y?(y=1/y,a*=y,f*=y,s*=y):(a=0,f=0,s=0),e[0]=n,e[1]=a,e[2]=l,e[3]=0,e[4]=c,e[5]=f,e[6]=x,e[7]=0,e[8]=i,e[9]=s,e[10]=p,e[11]=0,e[12]=-(n*h+c*m+i*u),e[13]=-(a*h+f*m+s*u),e[14]=-(l*h+x*m+p*u),e[15]=1,e)}function ui(e,t,r,o){var n=t[0],c=t[1],i=t[2],a=o[0],f=o[1],s=o[2],l=n-r[0],x=c-r[1],p=i-r[2],y=l*l+x*x+p*p;y>0&&(y=1/Math.sqrt(y),l*=y,x*=y,p*=y);var h=f*p-s*x,m=s*l-a*p,u=a*x-f*l;return y=h*h+m*m+u*u,y>0&&(y=1/Math.sqrt(y),h*=y,m*=y,u*=y),e[0]=h,e[1]=m,e[2]=u,e[3]=0,e[4]=x*u-p*m,e[5]=p*h-l*u,e[6]=l*m-x*h,e[7]=0,e[8]=l,e[9]=x,e[10]=p,e[11]=0,e[12]=n,e[13]=c,e[14]=i,e[15]=1,e}function mi(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function xi(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function pi(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function Rr(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function yi(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function hi(e,t,r,o){return e[0]=t[0]+r[0]*o,e[1]=t[1]+r[1]*o,e[2]=t[2]+r[2]*o,e[3]=t[3]+r[3]*o,e[4]=t[4]+r[4]*o,e[5]=t[5]+r[5]*o,e[6]=t[6]+r[6]*o,e[7]=t[7]+r[7]*o,e[8]=t[8]+r[8]*o,e[9]=t[9]+r[9]*o,e[10]=t[10]+r[10]*o,e[11]=t[11]+r[11]*o,e[12]=t[12]+r[12]*o,e[13]=t[13]+r[13]*o,e[14]=t[14]+r[14]*o,e[15]=t[15]+r[15]*o,e}function Ei(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function bi(e,t){var r=e[0],o=e[1],n=e[2],c=e[3],i=e[4],a=e[5],f=e[6],s=e[7],l=e[8],x=e[9],p=e[10],y=e[11],h=e[12],m=e[13],u=e[14],E=e[15],v=t[0],T=t[1],A=t[2],b=t[3],_=t[4],g=t[5],F=t[6],S=t[7],w=t[8],R=t[9],d=t[10],B=t[11],I=t[12],D=t[13],G=t[14],V=t[15];return Math.abs(r-v)<=N*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(o-T)<=N*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(n-A)<=N*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(c-b)<=N*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(i-_)<=N*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(a-g)<=N*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(f-F)<=N*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(s-S)<=N*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-w)<=N*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(x-R)<=N*Math.max(1,Math.abs(x),Math.abs(R))&&Math.abs(p-d)<=N*Math.max(1,Math.abs(p),Math.abs(d))&&Math.abs(y-B)<=N*Math.max(1,Math.abs(y),Math.abs(B))&&Math.abs(h-I)<=N*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(m-D)<=N*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(u-G)<=N*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(E-V)<=N*Math.max(1,Math.abs(E),Math.abs(V))}var Ti=Sr,Ai=Rr;var tt=te(J(),1),ce=null;function Me(e=!0,t="canvas"){return ce||(tt.default.info("\u{1F58C}\uFE0F Creating WebGL2 context"),ce=document.querySelector(t).getContext("webgl2",{antialias:e}),ce||tt.default.error("\u{1F4A5} Unable to create WebGL2 context!"),ce)}var _i="u_light",ge=class{constructor(){this.position=[0,0,0],this.color=[1,1,1],this.ambient=[.1,.1,.1]}apply(t){let r=this.getUniforms();K(t,r)}getUniforms(){let t={};for(let[r,o]of Object.entries(this))o!==void 0&&(t[`${_i}${r[0].toUpperCase()}${r.slice(1)}`]=o);return t}};var Pr=te(J(),1),we=class{constructor(){this.cache=new Map}get(t){if(!this.cache.has(t))throw new Error(`Model ${t} not found in cache`);return this.cache.get(t)}add(t){Pr.default.debug(`\u{1F9F0} Adding model '${t.name}' to cache`),this.cache.set(t.name,t)}};var Ie=class{constructor(){this.position=[0,0,30],this.lookAt=[0,0,0],this.up=[0,1,0],this.near=.1,this.far=100,this.fov=45}get matrix(){return C.targetTo(C.create(),this.position,this.lookAt,this.up)}projectionMatrix(t){return C.perspective(C.create(),this.fov*(Math.PI/180),t,this.near,this.far)}};var Re=class{constructor(t){this.transparent=!1;this.model=t}rotateX(t){this.rotate||(this.rotate=[0,0,0]),this.rotate[0]+=t}rotateY(t){this.rotate||(this.rotate=[0,0,0]),this.rotate[1]+=t}rotateZ(t){this.rotate||(this.rotate=[0,0,0]),this.rotate[2]+=t}render(t,r,o,n){if(!t)return;let c=C.create();this.scale&&C.scale(c,c,this.scale),this.position&&C.translate(c,c,this.position),this.rotate&&(C.rotateX(c,c,this.rotate[0]),C.rotateY(c,c,this.rotate[1]),C.rotateZ(c,c,this.rotate[2])),r.u_world=c,C.invert(r.u_worldInverseTranspose,c),C.transpose(r.u_worldInverseTranspose,r.u_worldInverseTranspose),C.multiply(r.u_worldViewProjection,o,c);for(let i of this.model.parts){let a=i.bufferInfo;this.model.materials[i.materialName].apply(n),xr(t,n,a),K(n,r),yr(t,a)}}};var dr=`precision highp float;

varying vec3 v_lighting;
varying vec2 v_texCoord;

uniform vec3 u_matDiffuse;
uniform float u_transparency;

// temp
varying vec4 v_color;

void main(void) {
  gl_FragColor = vec4(u_matDiffuse, 1.0) * vec4(v_lighting, 1.0);
  //gl_FragColor.a = u_transparency;
  
  // return red pixels for testing
  //gl_FragColor = vec4(1.0, 0.0, 0.0, 0.5);
}
`;var Br=`precision highp float;

uniform mat4 u_worldViewProjection;
uniform mat4 u_worldInverseTranspose;
uniform mat4 u_world;

uniform vec3 u_lightPosition;
uniform vec3 u_lightColor;
uniform vec3 u_lightAmbient;

attribute vec4 position;
attribute vec3 normal;
attribute vec4 color;

// varying to pass to fragment shader
varying vec3 v_lighting;
varying vec4 v_color;

void main() {
  vec4 worldPos = u_world * position;
  float distance = length(u_lightPosition - worldPos.xyz) * 0.016;
  vec3 lightVector = normalize(u_lightPosition - worldPos.xyz);
  vec4 normalWorld = u_worldInverseTranspose * vec4(normal, 1.0);
  float intensity = clamp(dot(normalWorld.xyz, lightVector), 0.0, 0.8);

  //v_lighting = u_lightAmbient + (u_lightColor * (intensity / (distance * distance)));
  v_lighting = u_lightAmbient + (u_lightColor * intensity);
  v_color = color;
  gl_Position = u_worldViewProjection * position;
}`;var Cr=class e{constructor(t){this.aspectRatio=1;this.programs={};this.started=!1;this.instances=[];this.lights=[];this.resizeable=!0;this.debug=!1;this.gl=t,this.models=new we,this.prevTime=0,this.totalTime=0;let r=new ge;r.position=[0,100,0],r.color=[1,1,1],r.ambient=[.2,.2,.2],this.lights[0]=r,this.camera=new Ie,this.update=()=>{},ee.default.info("\u{1F451} GSOTS context created")}static async init(t){let r=Me(!0,t);if(!r)throw ee.default.error("\u{1F4A5} Failed to get WebGL context"),new Error("Failed to get WebGL context");let o=new e(r),n=r.canvas;o.aspectRatio=n.clientWidth/n.clientHeight;let c=document.createElement("canvas");c.width=n.clientWidth,c.height=n.clientHeight,c.style.backgroundColor="transparent",document.getElementById("game")?.appendChild(c);let i=c.getContext("2d");if(!i)throw ee.default.error("\u{1F4A5} Failed to get 2D canvas context"),new Error("Failed to get 2D canvas context");o.ctx2D=i;try{let a=Qe(r,[Br,dr]);o.programs.standard=a,ee.default.info("\u{1F3A8} Loaded all shaders, GL is ready")}catch(a){throw ee.default.error(a),a}return r.enable(r.DEPTH_TEST),r.enable(r.CULL_FACE),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),o.render=o.render.bind(o),o}async render(t){if(!this.gl)return;t*=.001;let r=t-this.prevTime;this.prevTime=t,this.totalTime+=r,this.update(r);let o={u_worldInverseTranspose:C.create(),u_worldViewProjection:C.create()},n=this.programs.standard;this.resizeable&&(et(this.gl.canvas),et(this.ctx2D?.canvas),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.aspectRatio=this.gl.canvas.width/this.gl.canvas.height);let c=this.camera.matrix,i=C.invert(C.create(),c);o.u_camMatrix=c;let a=this.camera.projectionMatrix(this.aspectRatio),f=C.multiply(C.create(),a,i);this.gl.useProgram(n.program),this.lights[0].apply(n);for(let s of this.instances)s.render(this.gl,o,f,n);this.ctx2D&&this.debug&&(this.ctx2D.clearRect(0,0,this.ctx2D.canvas.width,this.ctx2D.canvas.height),this.ctx2D.fillStyle="white",this.ctx2D.font="19px monospace",this.ctx2D.fillText(`GSOTS-3D v${Nr}`,10,20),this.ctx2D.fillText(`FPS: ${Math.round(1/r)}`,10,40),this.ctx2D.fillText(`Time: ${Math.round(this.totalTime*100)/100}`,10,60)),this.started&&requestAnimationFrame(this.render)}start(){this.started=!0,requestAnimationFrame(this.render)}stop(){this.started=!1}createInstance(t){let r=this.models.get(t);if(!r)throw new Error(`Model ${t} not found`);let o=new Re(r);return this.instances.push(o),o}get defaultLight(){return this.lights[0]}};function Ur(e){let t=new Map,r={},o={newmtl(i,a){r={},t.set(a,r)},Ns(i){r.ns=parseFloat(i[0])},Ka(i){r.ka=i.map(parseFloat)},Kd(i){r.kd=i.map(parseFloat)},Ks(i){r.ks=i.map(parseFloat)},Ke(i){r.ke=i.map(parseFloat)},Ni(i){r.ni=parseFloat(i[0])},d(i){r.d=parseFloat(i[0])},illum(i){r.illum=parseInt(i[0])}},n=/(\w*)(?: )*(.*)/,c=e.split(`
`);for(let i=0;i<c.length;++i){let a=c[i].trim();if(a===""||a.startsWith("#"))continue;let f=n.exec(a);if(!f)continue;let[,s,l]=f,x=a.split(/\s+/).slice(1),p=o[s];if(!p){console.warn("unhandled keyword:",s);continue}p(x,l)}return t}var Si=/(\w*)(?: )*(.*)/;function Dr(e){let t=e.split(`
`),r=[[0,0,0]],o=[[0,0]],n=[[0,0,0]],c=[r,o,n],i=[[],[],[]],a=Array(),f={},s="__default",l=Array(),x={v(m){r.push(m.map(parseFloat))},vn(m){n.push(m.map(parseFloat))},vt(m){o.push(m.map(parseFloat))},f(m){h();let u=m.length-2;for(let E=0;E<u;++E)p(m[0]),p(m[E+1]),p(m[E+2])},usemtl(m,u){s=u,y()},mtllib(m,u){l.push(u)},s(){},o(){}};function p(m){m.split("/").forEach((E,v)=>{if(!E)return;let T=parseInt(E),A=T+(T>=0?0:c[v].length);i[v].push(...c[v][A])})}function y(){f.material&&(f={})}function h(){if(!f.material){let m=[],u=[],E=[];i=[m,u,E],f={material:s,data:{position:m,texcoord:u,normal:E}},a.push(f)}}for(let m=0;m<t.length;++m){let u=t[m].trim();if(u===""||u.startsWith("#"))continue;let E=Si.exec(u);if(!E)continue;let[,v,T]=E,A=u.split(/\s+/).slice(1),b=x[v];if(!b){console.warn("unhandled keyword:",v,"at line",m+1);continue}b(A,T)}for(let m of a)m.data.texcoord&&m.data.texcoord.length<=0&&delete m.data.texcoord;return{matLibNames:l,geometries:a}}async function rt(e){let t=await fetch(e);if(!t.ok)throw new Error(`File fetch failed: ${t.statusText}`);return await t.text()}var Or=te(J(),1),Lr=class e{constructor(t){this.parts=[];this.materials={};this.name=t}static async parse(t=".",r){let o=r.split(".")[0],n=new e(o),c;try{c=await rt(`${t}/${r}`)}catch{throw new Error(`\u{1F4A5} Unable to load model ${r}`)}let i=Dr(c);if(!i.geometries||i.geometries.length===0)throw new Error(`\u{1F4A5} Error parsing model ${r}`);if(i.matLibNames&&i.matLibNames.length>0)try{let s=await rt(`${t}/${i.matLibNames[0]}`),l=Ur(s);for(let[x,p]of l)n.materials[x]=new oe(p)}catch{console.warn(`Unable to load material library ${i.matLibNames[0]}`)}let a=new oe({kd:[.2,.5,.97]});n.materials.__default=a;let f=Me();if(!f)throw new Error("Unable to get WebGL context");for(let s of i.geometries){let l=$e(f,s.data);n.parts.push(new nt(l,s.material))}return Or.default.debug(`\u265F\uFE0F Model '${r}' loaded with ${n.parts.length} parts, ${Object.keys(n.materials).length} materials`),n}},nt=class{constructor(t,r){this.bufferInfo=t,this.materialName=r}};var Nr="0.0.2";export{Ie as Camera,Cr as Context,ge as Light,oe as Material,Lr as Model,Nr as VERSION,ra as setLogLevel};
/*! Bundled license information:

twgl.js/dist/5.x/twgl-full.module.js:
  (* @license twgl.js 5.3.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
  Available via the MIT license.
  see: http://github.com/greggman/twgl.js for details *)
*/
